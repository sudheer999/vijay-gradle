
SET foreign_key_checks = 0;
UPDATE  `MODULES` SET PERMISSION_TYPES ='D-DN-UP' WHERE NAME ='PAY SLIPS' ;
UPDATE  `MODULES` SET PERMISSION_TYPES ='RN-E' WHERE NAME ='ROLL-ON' ;

####################related to Travel###################

ALTER TABLE `ITEM_COST_INFO` ADD CONSTRAINT `TL_ID_FK3` FOREIGN KEY `TL_ID_FK3` (`TL_ID`)
    REFERENCES `TRAVEL` (`ID`)
    ON DELETE CASCADE
    ON UPDATE RESTRICT, ENGINE = InnoDB;

##############################

UPDATE `ISSUES` SET DIV_ID=19 where DIV_ID=13;

ALTER TABLE `USER_TASK_TIMESHEET_MAP` MODIFY COLUMN `ETC` FLOAT  NOT NULL,
 MODIFY COLUMN `TOTAL_ETC` FLOAT  NOT NULL;
 ALTER TABLE `USER_TASK_FILLED` MODIFY COLUMN `HOURS_SPENT` VARCHAR(250)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;
 ALTER TABLE `ROLL_ON` ADD COLUMN `ROLL_OFF_DATE` TIMESTAMP NULL;


 ############# PROJECT ####################
 ALTER TABLE `PROJECT` ADD COLUMN `LAST_MODIFIED_BY` INTEGER  NOT NULL AFTER `CREATE_DATE`,
 ADD COLUMN `LAST_MODIFIED_ON` TIMESTAMP  NOT NULL AFTER `LAST_MODIFIED_BY`;

 UPDATE PROJECT AS a
 INNER JOIN PROJECT  AS b ON  a.ID=b.ID
 SET a.LAST_MODIFIED_BY = b.OWNER_ID;
 
 ###########################
 
  ####################Salary INTEGER TO DECIMAL#####################
ALTER TABLE `SALARY_DETAILS` MODIFY COLUMN `MONTHLY` VARCHAR(50)  DEFAULT NULL,
 MODIFY COLUMN `ANNUAL` VARCHAR(50)  DEFAULT NULL,
 MODIFY COLUMN `SUM` VARCHAR(50)  DEFAULT NULL;
 
ALTER TABLE `SALARY_FOR_APPROVAL` MODIFY COLUMN `MONTHLY` VARCHAR(50)  DEFAULT NULL,
 MODIFY COLUMN `ANNUAL` VARCHAR(50)  DEFAULT NULL,
 MODIFY COLUMN `SUM` VARCHAR(50)  DEFAULT NULL;

ALTER TABLE `FINANCE_INFO` MODIFY COLUMN `CTC` VARCHAR(50)  DEFAULT NULL;



#####################for candidate status######################
UPDATE STATUS SET STATUS = "Pending Approval" WHERE ID = 4 
UPDATE STATUS SET STATUS = "Offer Re-Sent" WHERE ID = 6 
UPDATE STATUS SET STATUS = "Approved" WHERE ID = 7
UPDATE STATUS SET STATUS = "Rejected By Approver" WHERE ID =8 


############### sodexo delivery address #########################
ALTER TABLE `DIKSHA_PORTAL_2`.`SODEXO_DETAILS` MODIFY COLUMN `DELIVERY_ADDRESS` VARCHAR(150)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;


ALTER TABLE `DIKSHA_PORTAL_2`.`REQUESTED_ISSUES` MODIFY COLUMN `SUMMARY` VARCHAR(100)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL,
 MODIFY COLUMN `DESCRIPTION` VARCHAR(1000)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL,
 MODIFY COLUMN `COMMENT` VARCHAR(500)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;
ALTER TABLE `DIKSHA_PORTAL_2`.`ISSUE_COMMENTS` MODIFY COLUMN `COMMENT` VARCHAR(500)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;

#############################
ALTER TABLE `DIKSHA_PORTAL_2`.`LEAVE_MASTER` MODIFY COLUMN `REASON` VARCHAR(100)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;
ALTER TABLE `DIKSHA_PORTAL_2`.`TIME_SHEET_DETAILS` MODIFY COLUMN `SUBMISSION_DATE` TIMESTAMP ;

#########ADD cancel request STATUS############33333

INSERT INTO `DIKSHA_PORTAL_2`.`STATUS` VALUES  (34,'Cancel Request');

##################### SODEXO REQUESTED_ON _TIME_STAMP_ #####################ok
ALTER TABLE `DIKSHA_PORTAL_2`.`SODEXO_DETAILS` MODIFY COLUMN `REQUESTED_ON` TIMESTAMP  NOT NULL;
ALTER TABLE `DIKSHA_PORTAL_2`.`SODEXO_REQ` MODIFY COLUMN `ACTION_DATE` TIMESTAMP  NOT NULL;

##################### FEW CHANGES FOR PHONE NUMBER #####################

ALTER TABLE `DIKSHA_PORTAL_2`.`NOMINEE_INFO` MODIFY COLUMN `CONTACT_NO` VARCHAR(20)  DEFAULT NULL;
ALTER TABLE `DIKSHA_PORTAL_2`.`PERSONAL_INFO` MODIFY COLUMN `EMER_PHONE_NO` BIGINT  DEFAULT NULL;


########################## PROJECT CREATOR   ##########################
ALTER TABLE `DIKSHA_PORTAL_2`.`PROJECT` ADD COLUMN `CREATOR_ID` INTEGER  NOT NULL AFTER `OWNER_ID`;




################### SERVICE REQUEST : SUBMISSION_DATE has been changed from DATE to TIMESTAMP : 01-08-2012 : Ganesha MN #################
ALTER TABLE `DIKSHA_PORTAL_2`.`REQUESTED_ISSUES` MODIFY COLUMN `SUBMISSION_DATE` TIMESTAMP  NOT NULL DEFAULT CURRENT_TIMESTAMP;


################### REIMBURSEMENT : ADD COLUMN `ACTION_TAKEN_ON` and  ADD COLUMN `ACTION_TAKEN_BY` : 02-08-21012 : Supriya#################

ALTER TABLE `DIKSHA_PORTAL_2`.`REIMBURSEMENT_REQ`  ADD COLUMN `ACTION_TAKEN_BY` INTEGER(11)  DEFAULT NULL;
ALTER TABLE `DIKSHA_PORTAL_2`.`REIMBURSEMENT_REQ` ADD COLUMN   `ACTION_TAKEN_ON` timestamp NOT NULL DEFAULT  '0000-00-00 00:00:00';

################### BANK_DETAILS : CHANGE COLUMN `CREATED_ON` : 03-08-21012 : Supriya#################
ALTER TABLE `DIKSHA_PORTAL_2`.`BANK_DETAILS` MODIFY COLUMN `CREATED_ON` VARCHAR(20)  DEFAULT NULL;


################### Festival Wishes new Module added on 8/2/2012  #################

INSERT INTO `DIKSHA_PORTAL_2`.`MODULES` values (58,"Festival Wishes",16,0,'S-V-E-D');
#######################      PO_EMP_MAP related to charge-code Vijay Jayaram ###################################
ALTER TABLE `DIKSHA_PORTAL_2`.`PO_EMP_MAP` ADD COLUMN `CURRENT` TINYINT  DEFAULT 1 AFTER `INACTIVE`;


#######################      BANK_DETAILS related to size supriya bhike ###################################
ALTER TABLE `DIKSHA_PORTAL_2`.`BANK_DETAILS` MODIFY COLUMN `CREATED_ON` VARCHAR(30)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;


##########################         sodexo denominations -vijay jayaram                  ##########################################
--
-- Definition of table `DIKSHA_PORTAL_2`.`SODEXO_DENOMINATIONS`
--

DROP TABLE IF EXISTS `DIKSHA_PORTAL_2`.`SODEXO_DENOMINATIONS`;
CREATE TABLE  `DIKSHA_PORTAL_2`.`SODEXO_DENOMINATIONS` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `DENOMS` int(10) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=latin1;

--
-- Dumping data for table `DIKSHA_PORTAL_2`.`SODEXO_DENOMINATIONS`
--

/*!40000 ALTER TABLE `SODEXO_DENOMINATIONS` DISABLE KEYS */;
LOCK TABLES `SODEXO_DENOMINATIONS` WRITE;
INSERT INTO `DIKSHA_PORTAL_2`.`SODEXO_DENOMINATIONS` VALUES  (1,1000),
 (2,1200),
 (3,1500),
 (4,1750),
 (5,1800),
 (6,2000),
 (7,2200);
UNLOCK TABLES;
/*!40000 ALTER TABLE `SODEXO_DENOMINATIONS` ENABLE KEYS */;


################### Festival Wishes tabel Module 9/8/2012  #################
DROP TABLE IF EXISTS `DIKSHA_PORTAL_2`.`FESTIVAL_WISHES`;
CREATE TABLE  `DIKSHA_PORTAL_2`.`FESTIVAL_WISHES` (
  `ID` int(10) unsigned NOT NULL auto_increment,
  `DOF` date NOT NULL,
  `NAME` varchar(100) NOT NULL,
  `WISHES` varchar(135) NOT NULL,
  `REGION_ID` int(11) NOT NULL,
  `IMAGE_ID` int(11) default NULL,
  `YEAR` int(11) NOT NULL,
  PRIMARY KEY  (`ID`),
  KEY `FK_FESTIVAL_WISHES_1` (`REGION_ID`),
  CONSTRAINT `FK_FESTIVAL_WISHES_1` FOREIGN KEY (`REGION_ID`) REFERENCES `REGIONS` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=latin1;



########################################10-08-12 GANESH ##################################################

/*!ALTER TABLE `IT_REQUEST` ADDED COLUMN 'LAST_MODIFIED_DATE' ---- */;
ALTER TABLE `DIKSHA_PORTAL_2`.`IT_REQUEST` ADD COLUMN `LAST_MODIFIED_DATE` TIMESTAMP;

########################################REIMBURSEMENT_ BONUS supriya aug 23 ##################################################

 
ALTER TABLE `DIKSHA_PORTAL_2`.`REIMBURSEMENT_FINANCIAL_DATA` MODIFY COLUMN `AMOUNT` VARCHAR(10)  DEFAULT NULL;
ALTER TABLE `DIKSHA_PORTAL_2`.`REIMBURSEMENT_REQ` ADD COLUMN `ACTIVE`  tinyint(1) DEFAULT NULL AFTER `STATUS`;

###################################### for inbox history. ADDED ON  22/08/2012#####################################

CREATE TABLE IF NOT EXISTS `DIKSHA_PORTAL_2`.`INBOX_HISTORY` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `RECEIVER_ID` int(11) NOT NULL,
  `ESR_MAP_ID` int(11) DEFAULT NULL,
  `SUBJECT` varchar(100) DEFAULT NULL,
  `ASSIGNED_TO` int(11) DEFAULT NULL,
  `RAISED_BY` int(11) DEFAULT NULL,
  `CREATION_DATETIME` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DUE_DATE` date DEFAULT NULL,
  `STATUS` varchar(100) NOT NULL,
  `CATEGORY` varchar(50) NOT NULL,
  `MESSAGE_BODY` longtext
) ENGINE=InnoDB AUTO_INCREMENT=14887 DEFAULT CHARSET=latin1;

drop trigger if exists inbox_backup;


delimiter //
CREATE TRIGGER inbox_backup AFTER delete ON INBOX
FOR EACH ROW
	BEGIN
		insert into INBOX_HISTORY values(OLD.ID,OLD.RECEIVER_ID,OLD.ESR_MAP_ID,OLD.SUBJECT,OLD.ASSIGNED_TO,OLD.RAISED_BY,OLD.CREATION_DATETIME,
		OLD.DUE_DATE,OLD.STATUS,OLD.CATEGORY,OLD.MESSAGE_BODY);
	END;//
delimiter ;


DELETE FROM INBOX WHERE IS_DELETED=1;


######################### vijay jayaram phoneNo changed from int to String #####################
ALTER TABLE `DIKSHA_PORTAL_2`.`TRAVEL_CONTACT_DETAILS` MODIFY COLUMN `PHONE_NO` VARCHAR(20)  NOT NULL;


#########################Supriya addded new Status Processing at ID=35 #####################
INSERT INTO STATUS(ID,STATUS)VALUES(35,"Processing");
#########################Supriya addded new COLUMN `OLD_STATUS #####################
ALTER TABLE `DIKSHA_PORTAL_2`.`REIMBURSEMENT_REQ` ADD COLUMN `OLD_STATUS` VARCHAR(50)  DEFAULT NULL AFTER `ACTIVE`;

#########################vijay addded new Status CANCEL IN-PROGRESS at ID=36  on Aug-28-2012#####################
INSERT INTO STATUS(ID,STATUS)VALUES(36,"Cancel In-Progress");





#### 03/09/2012 by gurunath  ####
##################################### FOR DOCKING STATION ############################################

DROP TABLE IF EXISTS `DIKSHA_PORTAL_2`.`EMP_SER_REQ_HISTORY`;

CREATE TABLE  `DIKSHA_PORTAL_2`.`EMP_SER_REQ_HISTORY` (
  `ID` bigint(20) NOT NULL AUTO_INCREMENT,
  `ESR_MAP_ID` int(11) NOT NULL,
  `ACTION_ON` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `ASSIGNED_TO` int(11) NOT NULL,
  `ASSIGNED_BY` int(11) NOT NULL,
  `COMMENTS` varchar(250) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `ESRH_ID_FK` (`ESR_MAP_ID`),
  CONSTRAINT `ESRH_ID_FK` FOREIGN KEY (`ESR_MAP_ID`) REFERENCES `INBOX` (`ESR_MAP_ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=latin1;

ALTER TABLE `DIKSHA_PORTAL_2`.`EMP_SER_REQ_MAP` ADD COLUMN `SIBLINGS` VARCHAR(500) AFTER `NOTIFY`;
ALTER TABLE `DIKSHA_PORTAL_2`.`INBOX` MODIFY COLUMN `STATUS` VARCHAR(100)  CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL;

################################ Appraisal########################################

CREATE TABLE  `DIKSHA_PORTAL_2`.`APPRAISAL` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `USER_ID` int(11) NOT NULL,
  `APPRAISER` int(11) NOT NULL,
  `HANDLER` int(11) NOT NULL,
  `TYPE` varchar(50) NOT NULL,
  `PERIOD` varchar(100) NOT NULL,
  `STATUS` varchar(100) NOT NULL,
  `DATETIME` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `YEAR` varchar(4) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `ap_user_id` (`USER_ID`),
  KEY `ap_appariser_index` (`APPRAISER`),
  KEY `ap_handler_index` (`HANDLER`),
  CONSTRAINT `app_APPRAISER_id_fk` FOREIGN KEY (`APPRAISER`) REFERENCES `USERS` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `app_HANDLER_id_fk` FOREIGN KEY (`HANDLER`) REFERENCES `USERS` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `app_user_id_fk` FOREIGN KEY (`USER_ID`) REFERENCES `USERS` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=latin1;


CREATE TABLE  `DIKSHA_PORTAL_2`.`APPRAISAL_DETAILS` (
  `ID` int(11) NOT NULL,
  `PROJ_DETAILS` text,
  `PROJ_ACTIVITY` varchar(500) DEFAULT NULL,
  `PROJ_TOTALDAYS` varchar(10) DEFAULT NULL,
  `PROF_RATINGS` varchar(2500) DEFAULT NULL,
  `PROF_PRACTICES` varchar(500) DEFAULT NULL,
  `PROF_LIKEWISE` varchar(500) DEFAULT NULL,
  `PROF_DIFFICULT` varchar(500) DEFAULT NULL,
  `PROF_MOST` varchar(500) DEFAULT NULL,
  `PROF_LEAST` varchar(500) DEFAULT NULL,
  `PERS_RATINGS` varchar(4500) DEFAULT NULL,
  `INDI_GOALS` varchar(500) DEFAULT NULL,
  `INDI_TIME` varchar(500) DEFAULT NULL,
  `INDI_PLAN` varchar(500) DEFAULT NULL,
  `INDI_STRENGTHS` varchar(500) DEFAULT NULL,
  `INDI_OPPORTUNITIES` varchar(500) DEFAULT NULL,
  `INDI_TIMEBOUND` varchar(500) DEFAULT NULL,
  `INDI_GAPS` varchar(500) DEFAULT NULL,
  `INDI_SKILS` varchar(500) DEFAULT NULL,
  `INDI_PERFORMANCE` varchar(500) DEFAULT NULL,
  `INDI_ADVANCEMENT` varchar(500) DEFAULT NULL,
  `INDI_ROADMAP` varchar(500) DEFAULT NULL,
  `FEED_RATINGS` varchar(2200) DEFAULT NULL,
  `FEED_COMMENTS` varchar(500) DEFAULT NULL,
  `PROM_RATINGS` varchar(850) DEFAULT NULL,
  `PROM_COMMENTS` varchar(500) DEFAULT NULL,
  `PROM_PROMOTABLE` varchar(10) DEFAULT NULL,
  `PROM_HOWSOON` varchar(50) DEFAULT NULL,
  `PROM_PROMOTEDAS` varchar(50) DEFAULT NULL,
  KEY `APP_DET_ID` (`ID`),
  CONSTRAINT `APP_DET_ID_FK` FOREIGN KEY (`ID`) REFERENCES `APPRAISAL` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;
#################### 04/09/2012 #########
INSERT INTO STATUS(ID, STATUS) VALUES(38,'PAF Available'),(39,'PAF Submitted'),(40,'Pending – Appraiser'),(41,'Pending - RMG');
INSERT INTO REQUEST_TYPE(ID, NAME,ABBREVATION,FEATURE_ID) VALUES(12,'APPRAISAL','APP',20);
ALTER TABLE `DIKSHA_PORTAL_2`.`APPRAISAL` ADD COLUMN `ESR_MAP_ID` INT(11) NOT NULL AFTER `YEAR`;

CREATE TABLE `DIKSHA_PORTAL_2`.`APPRAISAL_REQ` (
  `ID` INT  NOT NULL AUTO_INCREMENT,
  `APPRAISAL_ID` INT  NOT NULL,
  `STATUS` VARCHAR(100)  NOT NULL,
  `COMMENTS` VARCHAR(500) ,
  `ACTIONON` TIMESTAMP  NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `ACTION_BY` INT  NOT NULL,
  PRIMARY KEY (`ID`),
  INDEX `APP_REQ_APP_ID`(`APPRAISAL_ID`),
  INDEX `APP_REQ_ACT_BY`(`ACTION_BY`),
  CONSTRAINT `APP_REQ_APP_ID_FK` FOREIGN KEY `APP_REQ_APP_ID_FK` (`APPRAISAL_ID`)
    REFERENCES `APPRAISAL` (`ID`)
    ON DELETE CASCADE,
  CONSTRAINT `APP_REQ_ACT_BY_FK` FOREIGN KEY `APP_REQ_ACT_BY_FK` (`ACTION_BY`)
    REFERENCES `USERS` (`ID`)
    ON DELETE CASCADE
)
ENGINE = InnoDB;

######################################	06/09/2012	#############################################
#### added by guru
ALTER TABLE `DIKSHA_PORTAL_2`.`APPRAISAL` ADD COLUMN `APPRAISEEDUEDATE` DATE  AFTER `ESR_MAP_ID`,
 ADD COLUMN `APPRAISERDUEDATE` DATE  AFTER `APPRAISEEDUEDATE`;
 
#########################Supriya MODIFY  COLUMN FIELDTYPE TO VARCHAR(25) #####################
ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_DETAILS` MODIFY COLUMN `FIELDTYPE` VARCHAR(25)  DEFAULT NULL;
ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_FOR_APPROVAL` MODIFY COLUMN `FIELDTYPE` VARCHAR(25)  DEFAULT NULL;

###################Suresh  Appraisal manage module added on 8/9/2012  #################

INSERT INTO `DIKSHA_PORTAL_2`.`MODULES` values (59,"Appraisal Manage",16,0,'S-V-E-D');

###################Ganesh  IT SUPPORT module on 10/09/2012  #################
ALTER TABLE `DIKSHA_PORTAL_2`.`IT_REQUEST` ADD COLUMN `RECEIVER_ID` INTEGER  AFTER `LAST_MODIFIED_DATE`;

########################SALARY_INFO FOR CANDIDATE BONUS AND COMMITMENTS Supriya Sep 10th 2012########################
DROP TABLE IF EXISTS SALARY_INFO;
CREATE TABLE `SALARY_INFO` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `BASIC` int(10) DEFAULT NULL,
  `HRA` int(10) DEFAULT NULL,
  `CONVEYANCE` int(10) DEFAULT NULL,
  `MEDICAL_ALLOWANCE` int(10) DEFAULT NULL,
  `SPECIAL_ALLOWANCE` int(10) DEFAULT NULL,
  `PF_EMP_CONTRIBUTION` int(10) DEFAULT NULL,
  `ANNUAL_INCENTIVE` int(10) DEFAULT NULL,
  `RELOCATION_BONUS` varchar(30) DEFAULT NULL,
  `JOINING_BONUS_STRING` varchar(50) DEFAULT NULL,
  `JOINING_BONUS_DATE` varchar(20) DEFAULT NULL,
  `PAYMENT_TERMS` varchar(50) DEFAULT NULL,
  `PERDIEM_STRING` varchar(50) DEFAULT NULL,
  `TOTAL_SALARY` int(10) DEFAULT NULL,
  `MEDI_CLAIM_POLICY` int(10) DEFAULT NULL,
  `PER_ACCIDENT_POLICY` int(10) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=42 DEFAULT CHARSET=latin1;

#############################10/09/2012 GURUNATH####################################
ALTER TABLE LEAVE_MASTER MODIFY COLUMN COMMENT VARCHAR(250)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL,
 MODIFY COLUMN REMARK VARCHAR(250)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;
 

 ################################### 11-sept-2012 Vijay Jayaram ##########################
 ALTER TABLE `DIKSHA_PORTAL_2`.`SODEXO_DETAILS` MODIFY COLUMN `DELIVERY_ADDRESS` VARCHAR(300)  CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL;

  
 ################################### 12-sept-2012 Supriya Bhike ##########################
 ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_INFO` 
 MODIFY COLUMN `JOINING_BONUS_STRING` VARCHAR(300)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL,
 MODIFY COLUMN `PERDIEM_STRING` VARCHAR(300)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;
 ###################11 Sep 2012 Supriya########################
DROP TABLE IF EXISTS EMPLOYEE_TYPE;
CREATE TABLE `EMPLOYEE_TYPE` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `EMPLOYEE_TYPE` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1;


INSERT INTO EMPLOYEE_TYPE VALUES (1,'PROBATION');
INSERT INTO EMPLOYEE_TYPE VALUES (2,'CONFIRMED');


 ALTER TABLE `DIKSHA_PORTAL_2`.`DOCUMENTS` MODIFY COLUMN `FILENAME` VARCHAR(100)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;
################################### 20-Feb-2014 Manoj ########################## 
ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_INFO` ADD COLUMN `RETENTION_BONUS` VARCHAR(50);
   
 
###################12 Sep 2012 y.suresh ########################

UPDATE `DIKSHA_PORTAL_2`.`MODULES`  set IS_PROC_CHAIN=0 where ID=20 ;


######################12/09/2012

 ALTER TABLE `DIKSHA_PORTAL_2`.`APPRAISAL` ADD COLUMN `START_DATE` DATE  AFTER `APPRAISERDUEDATE`;
 



 ALTER TABLE `DIKSHA_PORTAL_2`.`APPRAISAL` ADD COLUMN `START_DATE` DATE  AFTER `APPRAISERDUEDATE`;
 
################ Ganesh: new table REFER FRIEND ##########
 CREATE TABLE  `DIKSHA_PORTAL_2`.`REFER_FRIEND` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ESR_MAP_ID` int(11) DEFAULT NULL,
  `SUMMARY` varchar(125) DEFAULT NULL,
  `ATTACHMENT` int(11) DEFAULT NULL,
  `REFERRED_TO` varchar(50) DEFAULT NULL,
  `DEPARTMENT` varchar(50) DEFAULT NULL,
  `EXPERIENCE_LAVEL` varchar(50) DEFAULT NULL,
  `REFERRED_BY` int(11) DEFAULT NULL,
  `CREATE_DATE` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_MODIFIED_DATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `IS_DELETED` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`),
  KEY `REFER_FRIEND_REQUEST_ESR_MAP_ID_FK` (`ESR_MAP_ID`),
  KEY `REFER_FRIEND_REQUEST_REFERRED_BY_FK` (`REFERRED_BY`),
  CONSTRAINT `REFER_FRIEND_REQUEST_ESR_MAP_ID_FK` FOREIGN KEY (`ESR_MAP_ID`) REFERENCES `EMP_SER_REQ_MAP` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `REFER_FRIEND_REQUEST_REFERRED_BY_FK` FOREIGN KEY (`REFERRED_BY`) REFERENCES `USERS` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=283 DEFAULT CHARSET=latin1;

######################13/09/2012 y.suresh #########################
INSERT INTO `DIKSHA_PORTAL_2`.`MODULES` values (60,'Refer a Friend',35,0,'S-V-E-D');
INSERT INTO STATUS(ID, STATUS) VALUES(42,'Rejected By Appraiser'),(43,'Rejected By RMG');

###################13 Sep 2012 Supriya########################
ALTER TABLE `DIKSHA_PORTAL_2`.`PROFILE_INFO` ADD COLUMN `MONTHS` VARCHAR(25)  DEFAULT NULL AFTER `DATE_OF_CONFIRMATION`;
 ALTER TABLE `DIKSHA_PORTAL_2`.`PROFILE_INFO` ADD COLUMN `DOC` DATE  DEFAULT NULL AFTER `MONTHS`,
 ADD COLUMN `EMPLOYEE_TYPE` ENUM('PROBATION','CONFIRMED') ;

 
 
 ALTER TABLE `DIKSHA_PORTAL_2`.`PROFILE_INFO` ADD COLUMN `EXTENSION` VARCHAR(10)  DEFAULT NULL AFTER `DOC`;
 
 
ALTER TABLE PROFILE_INFO DROP COLUMN EMPLOYEE_TYPE;
ALTER TABLE `DIKSHA_PORTAL_2`.`PROFILE_INFO` ADD COLUMN `EMPLOYEE_TYPE` ENUM('PROBATION','CONFIRMED') AFTER `NOTICE_PERIOD`;

UPDATE INBOX SET 
ASSIGNED_TO =0 
WHERE 
RAISED_BY = ASSIGNED_TO  AND CATEGORY LIKE 'REIMBURSEMENT';

############################## 17/09/2012 by guru
DELETE FROM INBOX WHERE STATUS IN ('Rejected','Cancelled','Approved','Completed') AND CATEGORY IN ('TIMESHEET','LEAVE');



###################################### TRAVEL comments_history added : by vijay jayaram 18/sept/2012 
ALTER TABLE `DIKSHA_PORTAL_2`.`TRAVEL` ADD COLUMN `COMMENTS_HISTORY` TEXT  DEFAULT NULL AFTER `PURPOSE_OF_TL`;


########################################## SODEXO_DETAILS delivery address modified : by vijay jayaram 18/sept/2012
ALTER TABLE `DIKSHA_PORTAL_2`.`SODEXO_DETAILS` MODIFY COLUMN `DELIVERY_ADDRESS` VARCHAR(300)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;

########################################## EMPLOYEE EMPLOYEE_TYPE DETAILS (SUPRIYA BHIKE) 26TH SEPT 2012#############
UPDATE PROFILE_INFO SET 
EMPLOYEE_TYPE="CONFIRMED"
WHERE 
DATE_OF_CONFIRMATION IS NOT NULL;

UPDATE PROFILE_INFO SET 
EMPLOYEE_TYPE="PROBATION"
WHERE 
DATE_OF_CONFIRMATION IS NULL;

######################## ROLL_ON CHARGE_CODE FK DROPPED  :Vijay Jayaram sept/26/2012 #######################
ALTER TABLE `DIKSHA_PORTAL_2`.`ROLL_ON` DROP FOREIGN KEY `ROLL_ON_CHARGE_CODE_FK`;
## by guru
ALTER TABLE  `APPRAISAL_REQ` MODIFY COLUMN `COMMENTS` TEXT  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;



################ sodexo fix for production server by vijay jayaram on 04/oct/2012
DELETE FROM INBOX WHERE ESR_MAP_ID IN (SELECT DISTINCT ESR_MAP_ID FROM SODEXO_REQ WHERE SD_ID IN(SELECT ID FROM SODEXO_DETAILS WHERE STATUS=27))
UPDATE INBOX SET ASSIGNED_TO=RECEIVER_ID WHERE ESR_MAP_ID IN (SELECT DISTINCT ESR_MAP_ID FROM SODEXO_REQ WHERE SD_ID IN(SELECT ID FROM SODEXO_DETAILS WHERE STATUS=25))

################ ROLL_ON fix for production server by vijay jayara on 04/oct/2012
DELETE FROM INBOX WHERE CATEGORY='ROLLON'

################ SALARY_INFO_FOR_APPROVAL Supriya 4th Oct##################

DROP TABLE IF EXISTS SALARY_INFO_FOR_APPROVAL;
CREATE TABLE `SALARY_INFO_FOR_APPROVAL` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `BASIC` int(10) DEFAULT NULL,
  `HRA` int(10) DEFAULT NULL,
  `CONVEYANCE` int(10) DEFAULT NULL,
  `MEDICAL_ALLOWANCE` int(10) DEFAULT NULL,
  `SPECIAL_ALLOWANCE` int(10) DEFAULT NULL,
  `PF_EMP_CONTRIBUTION` int(10) DEFAULT NULL,
  `ANNUAL_INCENTIVE` int(10) DEFAULT NULL,
  `RELOCATION_BONUS` varchar(30) DEFAULT NULL,
  `JOINING_BONUS_STRING` varchar(300) DEFAULT NULL,
  `JOINING_BONUS_DATE` varchar(20) DEFAULT NULL,
  `PAYMENT_TERMS` varchar(50) DEFAULT NULL,
  `PERDIEM_STRING` varchar(300) DEFAULT NULL,
  `TOTAL_SALARY` int(10) DEFAULT NULL,
  `MEDI_CLAIM_POLICY` int(10) DEFAULT NULL,
  `PER_ACCIDENT_POLICY` int(10) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=latin1;

####################### New Module added Candidate Management ####################################


INSERT INTO `DIKSHA_PORTAL_2`.`MODULES` values (61,'RESUME MANAGEMENT',14,0,'S-V-E-D');

DROP TABLE IF EXISTS `DIKSHA_PORTAL_2`.`RESUME_MANAGEMENT`;
CREATE TABLE  `DIKSHA_PORTAL_2`.`RESUME_MANAGEMENT` (
  `ID` int(11) NOT NULL auto_increment,
  `CANDIDATE_FIRST_NAME` varchar(50) default NULL,
  `CANDIDATE_LAST_NAME` varchar(50) default NULL,
  `SKILL_SET` varchar(500) default NULL,
  `BILL_RATE` varchar(50) default NULL,
  `PAY_RATE` varchar(50) default NULL,
  `CITY` varchar(50) default NULL,
  `STATE` varchar(50) default NULL,
  `RELOCATION` int(11) default '0',
  `SECONDARY_SKILL_SET` varchar(500) default NULL,
  `E_MAILID` varchar(100) default NULL,
  `VISA_TYPE` varchar(30) default NULL,
  `VT_COMP_NAME` varchar(50) default NULL COMMENT 'VisaType H1 B company name',
  `VT_CONT_PERSON` varchar(50) default NULL COMMENT 'VisaType H1 B company contact person',
  `VT_CONT_PHONE` varchar(50) default NULL COMMENT 'VisaType H1 B comapny contact number',
  `VT_EMAIL_ID` varchar(50) default NULL COMMENT 'VisaType H1 B company contact email_id',
  `H_PHONE` varchar(50) default NULL,
  `CELL_NO` varchar(50) default NULL,
  `RECRUT_ID` int(5) NOT NULL,
  `RESUME` varchar(50) default NULL,
  `HOME_PHONE_NUMBER` varchar(50) default NULL,
  `STATUS` varchar(50) default NULL,
  `IS_DELETE` int(3) default '0',
  PRIMARY KEY  (`ID`),
  KEY `CANDIDATE_RECUT_ID_FK` (`RECRUT_ID`),
  CONSTRAINT `CANDIDATE_RECUT_ID_FK` FOREIGN KEY (`RECRUT_ID`) REFERENCES `USERS` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=313 DEFAULT CHARSET=latin1;

##########################################gurunath added for "Exception: Got error 139 from storage engine" on 08-10-2012
ALTER TABLE `APPRAISAL_DETAILS` DROP FOREIGN KEY `APP_DET_ID_FK`;
ALTER TABLE `APPRAISAL_DETAILS` ENGINE = MyISAM;

################################### Amruth mode changes

ALTER TABLE `DIKSHA_PORTAL_2`.`ADDRESS` MODIFY COLUMN `ADDRESS` VARCHAR(300)  DEFAULT NULL;

ALTER TABLE `DIKSHA_PORTAL_2`.`PROJ_LOCATIONS` MODIFY COLUMN `ADDRESS` VARCHAR(300)  DEFAULT NULL;

ALTER TABLE `DIKSHA_PORTAL_2`.`PROJECT` MODIFY COLUMN `BILL_ADDRESS` VARCHAR(300) DEFAULT NULL;

############################ suresh added table 10/10/2012  ###################
DROP TABLE IF EXISTS `DIKSHA_PORTAL_2`.`RESUME_SKILL_SET`;
CREATE TABLE  `DIKSHA_PORTAL_2`.`RESUME_SKILL_SET` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `NAME` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=36 DEFAULT CHARSET=latin1;

INSERT INTO `DIKSHA_PORTAL_2`.`RESUME_SKILL_SET` VALUES  (1,'Java Developers'),
 (2,'Java Architects'),
 (3,'.NET Developers'),
 (4,'Unix Admin'),
 (5,'HP-UX Admin'),
 (6,'Linux Admin'),
 (7,'Windows Admin'),
 (8,'Solaris Admin'),
 (9,'AIX Admin'),
 (10,'SAP functional'),
 (11,'SAP technical'),
 (12,'SAP techno-functional'),
 (13,'Oracle functional'),
 (14,'Oracle technical'),
 (15,'Oracle techno-functional'),
 (16,'PS functional'),
 (17,'PS technical'),
 (18,'PS techno-functional'),
 (19,'Tibco Developers'),
 (20,'Tibco Admins'),
 (21,'Oracle Developers'),
 (22,'SQL Developers'),
 (23,'Access Developers'),
 (24,'QA Lead'),
 (25,'QA'),
 (26,'QA Manager'),
 (27,'Netback up engineer'),
 (28,'Network engg'),
 (29,'BA(Business analyst)'),
 (30,'helpdesk support'),
 (31,'Kennan'),
 (32,'Oracle BRM'),
 (33,'Amdocs developers/ architects'),
 (34,'Project Managers'),
 (35,'Project co-ordinators');


DROP TABLE IF EXISTS `DIKSHA_PORTAL_2`.`STATE`;
CREATE TABLE  `DIKSHA_PORTAL_2`.`STATE` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `STATE` varchar(50) DEFAULT NULL,
  `STATE_ABBR` varchar(8) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=87 DEFAULT CHARSET=latin1;


INSERT INTO `DIKSHA_PORTAL_2`.`STATE` VALUES  (36,'Alabama','AL'),
 (37,'Alaska','AK'),
 (38,'Arizona','AZ'),
 (39,'Arkansas','AR'),
 (40,'California','CA'),
 (41,'Colorado','CO'),
 (42,'Connecticut','CT'),
 (43,'Delaware','DE'),
 (44,'District of Columbia','DC'),
 (45,'Florida','FL'),
 (46,'Georgia','GA'),
 (47,'Hawaii','HI'),
 (48,'Idaho','ID'),
 (49,'Illinois','IL'),
 (50,'Indiana','IN'),
 (51,'Iowa','IA'),
 (52,'Kansas','KS'),
 (53,'Kentucky','KY'),
 (54,'Louisiana','LA'),
 (55,'Maine','ME'),
 (56,'Maryland','MD'),
 (57,'Massachusetts','MA'),
 (58,'Michigan','MI'),
 (59,'Minnesota','MN'),
 (60,'Mississippi','MS'),
 (61,'Missouri','MO'),
 (62,'Montana','MT'),
 (63,'Nebraska','NE'),
 (64,'Nevada','NV'),
 (65,'New Hampshire','NH'),
 (66,'New Jersey','NJ'),
 (67,'New Mexico','NM'),
 (68,'New York','NY'),
 (69,'North Carolina','NC'),
 (70,'North Dakota','ND'),
 (71,'Ohio','OH'),
 (72,'Oklahoma','OK'),
 (73,'Oregon','OR'),
 (74,'Pennsylvania','PA'),
 (75,'Rhode Island','RI'),
 (76,'South Carolina','SC'),
 (77,'South Dakota','SD');
INSERT INTO `DIKSHA_PORTAL_2`.`STATE` VALUES  (78,'Tennessee','TN'),
 (79,'Texas','TX'),
 (80,'Utah','UT'),
 (81,'Vermont','VT'),
 (82,'Virginia','VA'),
 (83,'Washington','WA'),
 (84,'West Virginia','WV'),
 (85,'Wisconsin','WI'),
 (86,'Wyoming','WY');
### suresh renamed table 11/10/2012
ALTER TABLE `DIKSHA_PORTAL_2`.`STATE` RENAME TO `DIKSHA_PORTAL_2`.`US_STATE`;

### backup deleted table 11/10/2012
drop trigger if exists resumemanagenent_backup;
delimiter //
CREATE TRIGGER resumemanagenent_backup AFTER delete ON RESUME_MANAGEMENT
FOR EACH ROW
	BEGIN
		insert into RESUME_MANAGEMENT_BACKUP values(OLD.ID,OLD.CANDIDATE_FIRST_NAME,OLD.CANDIDATE_LAST_NAME,OLD.SKILL_SET,OLD.BILL_RATE,OLD.CITY,OLD.STATE,OLD.RELOCATION,
		OLD.SECONDARY_SKILL_SET,OLD.E_MAILID,OLD.VISA_TYPE,OLD.VT_COMP_NAME,OLD.VT_CONT_PERSON,OLD.VT_CONT_PHONE,OLD.VT_EMAIL_ID,OLD.H_PHONE,OLD.CELL_NO ,OLD.RECRUT_ID ,
     OLD.RESUME,OLD.HOME_PHONE_NUMBER,OLD.STATUS,OLD.IS_DELETE);
	END;//
delimiter ;

#### REPORTING_ADDRESS_NORMAL in PROFILE_INFO size changed to 300, Ravikumar on 15th oct
ALTER TABLE `DIKSHA_PORTAL_2`.`PROFILE_INFO` MODIFY COLUMN `REPORTING_ADDRESS_NORMAL` VARCHAR(300) CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;


##################### ROLL_ON capturing ph_no in contact information by vijay jayaram on 15/oct/2012
ALTER TABLE `DIKSHA_PORTAL_2`.`ROLL_ON_MGR_MAP` ADD COLUMN `MGR_PHONE_NO` VARCHAR(11)  DEFAULT NULL AFTER `MGR_DETAIL`;
ALTER TABLE `DIKSHA_PORTAL_2`.`ISSUE_HANDLER_CHAIN_REQ` MODIFY COLUMN `STATUS` VARCHAR(50)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;


UPDATE MODULES SET NAME="Resume Management" WHERE ID= 61;


UPDATE RESUME_MANAGEMENT SET VISA_TYPE="H1B" WHERE VISA_TYPE="4"; 
UPDATE RESUME_MANAGEMENT SET VISA_TYPE="EAD" WHERE VISA_TYPE="3"; 
UPDATE RESUME_MANAGEMENT SET VISA_TYPE="USC" WHERE VISA_TYPE="2";
UPDATE RESUME_MANAGEMENT SET VISA_TYPE="GC" WHERE VISA_TYPE="1";
UPDATE RESUME_MANAGEMENT SET VISA_TYPE="" WHERE VISA_TYPE="0";

UPDATE DOCUMENTS SET DESCRIPTIONS='download' where DESCRIPTIONS is null;


######################### timesheet compo off changes by gurunath on 30-10-2012 
ALTER TABLE `TIME_SHEET_DETAILS` ADD COLUMN `COMP_OFF` FLOAT  DEFAULT 0 AFTER `USER_ID`;


############### to keep resolution details of a request by Ganesh on 2/11/12###################
CREATE TABLE  `DIKSHA_PORTAL_2`.`ISSUE_RESOLUTION_DETAILS` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ESR_MAP_ID` int(11) DEFAULT NULL,
  `FIRST_STATUS` varchar(100) DEFAULT NULL,
  `LAST_STATUS` varchar(100) DEFAULT NULL,
  `REQUESTER_COMMENTS` varchar(250) DEFAULT NULL,
  `REQUESTED_ON` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `RESOLVED_ON` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `CLOSED_ON` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `RESOLVED_BY` int(11) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `ISSUE_RESOLUTION_DETAILS_USER_ID_FK` (`RESOLVED_BY`),
  KEY `ISSUE_RESOLUTION_DETAILS_EMP_SER_ID_FK` (`ESR_MAP_ID`),
  CONSTRAINT `ISSUE_RESOLUTION_DETAILS_EMP_SER_ID_FK` FOREIGN KEY (`ESR_MAP_ID`) REFERENCES `EMP_SER_REQ_MAP` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `ISSUE_RESOLUTION_DETAILS_USER_ID_FK` FOREIGN KEY (`RESOLVED_BY`) REFERENCES `USERS` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=50 DEFAULT CHARSET=latin1


#############	TRAVELLER_TYPE added new column by vijay jayaram on nov 7 ###############################
ALTER TABLE `DIKSHA_PORTAL_2`.`TRAVELLER_TYPE` ADD COLUMN `NEXT_SET_OF_APPROVERS` TEXT  DEFAULT NULL AFTER `IS_BUSSINESS_TYPE`;


SET foreign_key_checks = 1;

################## new column to IT_REQUEST by Ganesh on Nov 8 ####################
ALTER TABLE `DIKSHA_PORTAL_2`.`IT_REQUEST` ADD COLUMN `IS_DELETED` INTEGER  NOT NULL DEFAULT 0 AFTER `RECEIVER_ID`;

#####################for inbox issue...

ALTER TABLE INBOX DROP FOREIGN KEY INBOX_USER_FK;

######################### EXIT DB 28/01/2013 by gurunath.rokkam ##############################


--
-- Definition of table `DIKSHA_PORTAL_2`.`EXIT_EMPLOYEE`
--

CREATE TABLE  `DIKSHA_PORTAL_2`.`EXIT_EMPLOYEE` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ESR_MAP_ID` int(11) NOT NULL,
  `USER_ID` int(11) NOT NULL,
  `REASON` varchar(1000) NOT NULL,
  `STATUS_ID` int(11) NOT NULL,
  `SUBMITTEDON` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_WORKING_DAY` date DEFAULT NULL,
  `BUY_BACK` int(11) DEFAULT '0',
  `COMMENTS` varchar(1000) DEFAULT NULL,
  `EMPLOYEE_NOTE` varchar(1000) DEFAULT NULL,
  `NOTICE_PERIOD` int(3) DEFAULT '0',
  PRIMARY KEY (`ID`),
  KEY `USER_ID_EXIT_FK_KEY` (`USER_ID`),
  KEY `EXIT_EMP_ESR_MAP_ID_fk` (`ESR_MAP_ID`),
  CONSTRAINT `EXIT_EMP_ESR_MAP_ID_fk` FOREIGN KEY (`ESR_MAP_ID`) REFERENCES `EMP_SER_REQ_MAP` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `USER_ID_EXIT_FK_KEY` FOREIGN KEY (`USER_ID`) REFERENCES `USERS` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;



--
-- Definition of table `DIKSHA_PORTAL_2`.`EXIT_EMP_USERS_MAP`
--

CREATE TABLE  `DIKSHA_PORTAL_2`.`EXIT_EMP_USERS_MAP` (
  `ID` int(9) NOT NULL AUTO_INCREMENT,
  `EXIT_ID` int(9) NOT NULL DEFAULT '0',
  `USER_ID` int(9) NOT NULL DEFAULT '0',
  `TYPE` int(2) NOT NULL DEFAULT '0',
  PRIMARY KEY (`ID`),
  KEY `EXIT_EMP_USERS_MAP_EXIT_ID_fk` (`EXIT_ID`),
  KEY `EXIT_EMP_USERS_MAP_USER_ID_fk` (`USER_ID`),
  CONSTRAINT `EXIT_EMP_USERS_MAP_EXIT_ID_fk` FOREIGN KEY (`EXIT_ID`) REFERENCES `EXIT_EMPLOYEE` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `EXIT_EMP_USERS_MAP_USER_ID_fk` FOREIGN KEY (`USER_ID`) REFERENCES `USERS` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


--
-- Definition of table `DIKSHA_PORTAL_2`.`EXIT_FINANCE_NOC`
--

CREATE TABLE  `DIKSHA_PORTAL_2`.`EXIT_FINANCE_NOC` (
  `ID` int(9) NOT NULL AUTO_INCREMENT,
  `EXIT_ID` int(9) NOT NULL,
  `STATUS_ID` int(9) NOT NULL DEFAULT '0',
  `SALARY_FROM` date DEFAULT NULL,
  `SALARY_TO` date DEFAULT NULL,
  `PERDIEM_FROM` date DEFAULT NULL,
  `PERDIEM_TO` date DEFAULT NULL,
  `LWP_FROM` date DEFAULT NULL,
  `LWP_TO` date DEFAULT NULL,
  `PENDING` float NOT NULL DEFAULT '0',
  `SALARY_RECOVER` float NOT NULL DEFAULT '0',
  `AGREEMENT_RECOVER` float NOT NULL DEFAULT '0',
  `DUE` float NOT NULL DEFAULT '0',
  `DUE_ACCOUNT` varchar(250) DEFAULT ' ',
  `CHARGED_AMOUNT` float NOT NULL DEFAULT '0',
  `CHARGED_ACCOUNT` varchar(50) DEFAULT ' ',
  `CHARGED_ON` date DEFAULT NULL,
  `REMARKS` varchar(500) DEFAULT ' ',
  `SUBMITTED_ON` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  KEY `EXIT_FINANCE_NOC_EXIT_ID_fk` (`EXIT_ID`),
  CONSTRAINT `EXIT_FINANCE_NOC_EXIT_ID_fk` FOREIGN KEY (`EXIT_ID`) REFERENCES `EXIT_EMPLOYEE` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


--
-- Definition of table `DIKSHA_PORTAL_2`.`EXIT_IT_NOC`
--

CREATE TABLE  `DIKSHA_PORTAL_2`.`EXIT_IT_NOC` (
  `ID` int(9) NOT NULL AUTO_INCREMENT,
  `EXIT_ID` int(9) NOT NULL,
  `STATUS_ID` int(4) NOT NULL,
  `SYSTEM` int(1) NOT NULL DEFAULT '0',
  `ACCESSORIES` int(1) NOT NULL DEFAULT '0',
  `DISSABLED_EMAIL_ID` int(1) NOT NULL DEFAULT '0',
  `DISSABLED_DOMAIN_ID` int(1) NOT NULL DEFAULT '0',
  `MOBILE` int(1) NOT NULL DEFAULT '0',
  `FAILURE_AMMOUNT` float NOT NULL DEFAULT '0',
  `COMPANY_ASSETS` varchar(500) DEFAULT ' ',
  `REMARKS` varchar(500) DEFAULT ' ',
  `SUBMITTED_ON` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  KEY `EXIT_IT_NOC_EXIT_ID_FK` (`EXIT_ID`),
  CONSTRAINT `EXIT_IT_NOC_EXIT_ID_FK` FOREIGN KEY (`EXIT_ID`) REFERENCES `EXIT_EMPLOYEE` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

CREATE TABLE `EXIT_CLOSURE` (
  `ID` int(11) NOT NULL auto_increment,
  `EXIT_ID` int(11) NOT NULL,
  `DEPT_TYPE` int(11) NOT NULL,
  `QUESTION` varchar(450) NOT NULL,
  `ACTION` int(11) NOT NULL,
  `ACTION_ON` datetime NOT NULL,
  `SUBMITTED_ON` datetime NOT NULL,
  PRIMARY KEY  (`ID`),
  KEY `FK_EXIT_CLOSURE_EXIT_ID` (`EXIT_ID`),
  CONSTRAINT `FK_EXIT_CLOSURE_EXIT_ID` FOREIGN KEY (`EXIT_ID`) REFERENCES `EXIT_EMPLOYEE` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=34 DEFAULT CHARSET=latin1$$

delimiter $$

CREATE TABLE `EXIT_ADMIN_NOC` (
  `ID` int(11) NOT NULL auto_increment,
  `EXIT_ID` int(9) NOT NULL,
  `STATUS_ID` int(9) NOT NULL default '0',
  `ID_CARD` int(1) NOT NULL default '0',
  `LOCKER_KEYS` int(1) NOT NULL default '0',
  `STUDY_METERIALS` int(1) NOT NULL default '0',
  `INSURANCE_CARD` int(1) NOT NULL default '0',
  `FAILURE_AMOUNT` float NOT NULL default '0',
  `COMPANY_ASSETS` varchar(500) default NULL,
  `REMARKS` varchar(500) default NULL,
  `SUBMITTED_ON` timestamp NOT NULL default CURRENT_TIMESTAMP,
  PRIMARY KEY  (`ID`),
  KEY `EXIT_ADMIN_NOC_EXIT_ID_FK` (`EXIT_ID`),
  CONSTRAINT `EXIT_ADMIN_NOC_EXIT_ID_FK` FOREIGN KEY (`EXIT_ID`) REFERENCES `EXIT_EMPLOYEE` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1$$

--
-- Definition of table `DIKSHA_PORTAL_2`.`EXIT_QUESTIONS`
--

CREATE TABLE  `DIKSHA_PORTAL_2`.`EXIT_QUESTIONS` (
  `ID` int(11) NOT NULL,
  `TYPE` varchar(50) NOT NULL,
  `QUESTION` varchar(1000) NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `DIKSHA_PORTAL_2`.`EXIT_QUESTIONS`
--

/*!40000 ALTER TABLE `EXIT_QUESTIONS` DISABLE KEYS */;
LOCK TABLES `EXIT_QUESTIONS` WRITE;
INSERT INTO `DIKSHA_PORTAL_2`.`EXIT_QUESTIONS` VALUES  (1,'Questionnaire','What is employees main reason for leaving?'),
 (2,'Questionnaire','Were there any expectations employee had when he joined the company that were not met?'),
 (3,'Questionnaire','Does he have any concerns regarding our compensation,benefits, HR Practice and other reward and recognition efforts?'),
 (4,'Questionnaire','Has he shared his concerns with anyone in the company prior to deciding to leave?'),
 (5,'Questionnaire','Did Diksha help him to fulfill his career goals?'),
 (6,'Questionnaire','What his new company offer that Diksha doesnot?'),
 (7,'Questionnaire','If there is any other input from employee, other than above questions.'),
 (8,'Recommendation','Willing to retain the employee'),
 (9,'Recommendation','Commitments to retain'),
 (10,'Recommendation','Willing to reduce the Notice period'),
 (11,'Recommendation','Last working date'),
 (12,'Recommendation','Willing to waive off the notice period buyback'),
 (13,'Recommendation','Recommended release date'),
 (14,'Feedback','Was the employee happy working in Diksha?'),
 (15,'Feedback','Was the employee satisfied with Salary, Benefits , HR Practice, SPOC in Diksha?'),
 (16,'Feedback','Anything Diksha can do to encourage him to stay?'),
 (17,'Feedback','Impact on Project / Client'),
 (18,'Feedback','Positive/Negative feedback you received from the employee about Diksha'),
 (19,'Feedback','Do you need a replacement for the resource'),
 (20,'Feedback','Where would you rate this employee'),
 (21,'Feedback','Comments / Feedback / Suggestion(if any)');
UNLOCK TABLES;
/*!40000 ALTER TABLE `EXIT_QUESTIONS` ENABLE KEYS */;


--
-- Definition of table `DIKSHA_PORTAL_2`.`EXIT_QUESTIONS_MAP`
--

CREATE TABLE  `DIKSHA_PORTAL_2`.`EXIT_QUESTIONS_MAP` (
  `EXIT_QUESTION_ID` int(11) NOT NULL,
  `EXIT_ID` int(11) NOT NULL,
  `ANSWER` varchar(1000) NOT NULL,
  KEY `EXIT_QUESTION_ID_fk_constraint` (`EXIT_QUESTION_ID`),
  KEY `EXIT_ID_MAP_fk_constraint` (`EXIT_ID`),
  CONSTRAINT `EXIT_ID_MAP_fk_constraint` FOREIGN KEY (`EXIT_ID`) REFERENCES `EXIT_EMPLOYEE` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `EXIT_QUESTION_ID_fk_constraint` FOREIGN KEY (`EXIT_QUESTION_ID`) REFERENCES `EXIT_QUESTIONS` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Definition of table `DIKSHA_PORTAL_2`.`EXIT_REQUEST`
--

CREATE TABLE  `DIKSHA_PORTAL_2`.`EXIT_REQUEST` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `EXIT_ID` int(11) NOT NULL,
  `ACTION_BY` int(11) NOT NULL,
  `STATUS_ID` int(11) NOT NULL,
  `ACTION_ON` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `COMMENTS` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `EXIT_REQ_EXIT_ID_FK` (`EXIT_ID`),
  KEY `EXIT_REQ_ACTION_BY_FK` (`ACTION_BY`),
  CONSTRAINT `EXIT_REQ_ACTION_BY_FK` FOREIGN KEY (`ACTION_BY`) REFERENCES `USERS` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION,
  CONSTRAINT `EXIT_REQ_EXIT_ID_FK` FOREIGN KEY (`EXIT_ID`) REFERENCES `EXIT_EMPLOYEE` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1;


--
-- Definition of table `DIKSHA_PORTAL_2`.`EXIT_WITHDRAW`
--

CREATE TABLE  `DIKSHA_PORTAL_2`.`EXIT_WITHDRAW` (
  `ID` int(9) NOT NULL AUTO_INCREMENT,
  `EXIT_ID` int(9) NOT NULL,
  `STATUS_ID` int(3) NOT NULL,
  `REASON` varchar(500) NOT NULL,
  `SUBMITTED_ON` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `ON_STATUS_ID` int(3) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `EXIT_WITHDRAW_EXIT_ID_FK` (`EXIT_ID`),
  CONSTRAINT `EXIT_WITHDRAW_EXIT_ID_FK` FOREIGN KEY (`EXIT_ID`) REFERENCES `EXIT_EMPLOYEE` (`ID`) ON DELETE CASCADE ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=5 DEFAULT CHARSET=latin1;


CREATE TABLE `EXIT_QUESTIONNAIRE` (
  `ID` int(11) NOT NULL auto_increment,
  `EXIT_ID` int(11) NOT NULL,
  `REASON` varchar(4500) default ' ',
  `PREVENTABLE_STEPS` varchar(4500) default ' ',
  `NEW_EMP_SITUATION` varchar(4500) default ' ',
  `RESPONSIBILITIES` varchar(4500) default ' ',
  `CONCERNS` varchar(4500) default ' ',
  `RECOMMENDATIONS` varchar(4500) default ' ',
  `REJOINING` varchar(5) default ' ',
  `WORKING_WITH_US` varchar(250) default ' ',
  `COMMENTS` varchar(4500) default ' ',
  `SUBMITTED_ON` datetime default NULL,
  PRIMARY KEY  (`ID`),
  KEY `FK_EXIT_QUESTIONNAIRE_EXIT_ID` (`EXIT_ID`),
  CONSTRAINT `FK_EXIT_QUESTIONNAIRE_EXIT_ID` FOREIGN KEY (`EXIT_ID`) REFERENCES `EXIT_EMPLOYEE` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1$$

CREATE TABLE `EXIT_DECLARATION` (
  `ID` int(11) NOT NULL auto_increment,
  `EXIT_ID` int(11) NOT NULL,
  `INVENTIONS` varchar(1500) NOT NULL,
  `SUBMITTED_ON` datetime NOT NULL,
  PRIMARY KEY  (`ID`),
  KEY `FK_EXIT_DECLARATION_EXIT_ID` (`EXIT_ID`),
  CONSTRAINT `FK_EXIT_DECLARATION_EXIT_ID` FOREIGN KEY (`EXIT_ID`) REFERENCES `EXIT_EMPLOYEE` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1$$

CREATE TABLE `EXIT_QUESTIONNAIRE` (
  `ID` int(11) NOT NULL auto_increment,
  `EXIT_ID` int(11) NOT NULL,
  `REASON` varchar(4500) default ' ',
  `PREVENTABLE_STEPS` varchar(4500) default ' ',
  `NEW_EMP_SITUATION` varchar(4500) default ' ',
  `RESPONSIBILITIES` varchar(4500) default ' ',
  `CONCERNS` varchar(4500) default ' ',
  `RECOMMENDATIONS` varchar(4500) default ' ',
  `REJOINING` varchar(5) default ' ',
  `WORKING_WITH_US` varchar(250) default ' ',
  `COMMENTS` varchar(4500) default ' ',
  `SUBMITTED_ON` datetime default NULL,
  PRIMARY KEY  (`ID`),
  KEY `FK_EXIT_QUESTIONNAIRE_EXIT_ID` (`EXIT_ID`),
  CONSTRAINT `FK_EXIT_QUESTIONNAIRE_EXIT_ID` FOREIGN KEY (`EXIT_ID`) REFERENCES `EXIT_EMPLOYEE` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=latin1$$

CREATE TABLE `EXIT_DECLARATION` (
  `ID` int(11) NOT NULL auto_increment,
  `EXIT_ID` int(11) NOT NULL,
  `INVENTIONS` varchar(1500) NOT NULL,
  `SUBMITTED_ON` datetime NOT NULL,
  PRIMARY KEY  (`ID`),
  KEY `FK_EXIT_DECLARATION_EXIT_ID` (`EXIT_ID`),
  CONSTRAINT `FK_EXIT_DECLARATION_EXIT_ID` FOREIGN KEY (`EXIT_ID`) REFERENCES `EXIT_EMPLOYEE` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1$$



INSERT INTO MODULES VALUES(63,'Employee Exit',35,1,'S-V-E-D');
INSERT INTO REQUEST_TYPE VALUES(14,'EXIT','EXIT',63);
INSERT INTO STATUS VALUES(44,'Reopened'),(45,'Resigned'),(46,'Pending with RM'),(47,'Serving Notice period'),(48,'Exit formalities in-process'),(49,'Relieved'),(50,'Separated'),(51,'Withdrawn'),(52,'Withdrawn Raised'),(53,'Withdrawn In-Progress');
INSERT INTO PROCESS_CHAIN values(41,'IN_EXIT_EMP','RM;172;145;144;119','1,0,0,0|HRSPOC',NULL,63);

######################################### exit db end #############################


##################################################### insurance Module db added ###################################



DROP TABLE IF EXISTS `DIKSHA_PORTAL_2`.`INSURANCE_HANDLER_CHAIN_REQ`;
CREATE TABLE  `DIKSHA_PORTAL_2`.`INSURANCE_HANDLER_CHAIN_REQ` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ESR_MAP_ID` int(11) DEFAULT NULL,
  `STATUS` varchar(100) DEFAULT NULL,
  `RECEIVER_ID` int(11) DEFAULT NULL,
  `ASSIGN_TO` int(11) DEFAULT NULL,
  `REQUESTER_ID` int(11) DEFAULT NULL,
  `COMMENTS` varchar(200) DEFAULT NULL,
  `MESSAGE_BODY` text,
  `CREATE_DATE` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `LAST_MODIFIED_DATE` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `POLICY_REQ_ID` int(11) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `INSURANCE_HANDLER_CHAIN_REQ_ESR_MAP_ID_FK` (`ESR_MAP_ID`),
  KEY `INSURANCE_HANDLER_CHAIN_REQ_POLICY_REQ_ID_FK` (`POLICY_REQ_ID`),
  CONSTRAINT `INSURANCE_HANDLER_CHAIN_REQ_ESR_MAP_ID_FK` FOREIGN KEY (`ESR_MAP_ID`) REFERENCES `EMP_SER_REQ_MAP` (`ID`) ON DELETE SET NULL,
  CONSTRAINT `INSURANCE_HANDLER_CHAIN_REQ_POLICY_REQ_ID_FK` FOREIGN KEY (`POLICY_REQ_ID`) REFERENCES `INSURANCE_POLICY_REQ` (`ID`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=211 DEFAULT CHARSET=latin1;

DROP TABLE IF EXISTS `DIKSHA_PORTAL_2`.`INSURANCE_POLICY_DETAILS`;
CREATE TABLE  `DIKSHA_PORTAL_2`.`INSURANCE_POLICY_DETAILS` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ESR_MAP_ID` int(11) DEFAULT NULL,
  `NAME` varchar(50) DEFAULT NULL,
  `GENDER` varchar(7) DEFAULT NULL,
  `DOB` date DEFAULT NULL,
  `AGE` int(11) DEFAULT NULL,
  `RELATIONSHIP` varchar(10) DEFAULT NULL,
  `POLICY_REQ_ID` int(11) DEFAULT NULL,
  `CARD_ID` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `INSURENCE_POLICY_DETAILS_ESR_MAP_ID_FK` (`ESR_MAP_ID`),
  KEY `INSURENCE_POLICY_DETAILS_POLICY_REQ_ID_FK` (`POLICY_REQ_ID`),
  CONSTRAINT `INSURENCE_POLICY_DETAILS_ESR_MAP_ID_FK` FOREIGN KEY (`ESR_MAP_ID`) REFERENCES `EMP_SER_REQ_MAP` (`ID`) ON DELETE SET NULL,
  CONSTRAINT `INSURENCE_POLICY_DETAILS_POLICY_REQ_ID_FK` FOREIGN KEY (`POLICY_REQ_ID`) REFERENCES `INSURANCE_POLICY_REQ` (`ID`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=180 DEFAULT CHARSET=latin1;



DROP TABLE IF EXISTS `DIKSHA_PORTAL_2`.`INSURANCE_POLICY_REQ`;
CREATE TABLE  `DIKSHA_PORTAL_2`.`INSURANCE_POLICY_REQ` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ESR_MAP_ID` int(11) DEFAULT NULL,
  `STATUS` varchar(50) DEFAULT NULL,
  `REQUETER_ID` int(11) DEFAULT NULL,
  `POLICY_NUMBER` varchar(50) DEFAULT NULL,
  `POLICY_TYPE` varchar(15) DEFAULT NULL,
  `COVERAGE` int(10) DEFAULT NULL,
  `COVERAGE_FROM` date DEFAULT NULL,
  `COVERAGE_UPTO` date DEFAULT NULL,
  `DELIVERY_ADDRESS` varchar(100) DEFAULT NULL,
  `BASIC_PREMIUM` int(10) DEFAULT NULL,
  `SERVICE_TAX` int(6) DEFAULT NULL,
  `REQUESTED_ON` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `DATE_OF_COMPLETION` timestamp NOT NULL DEFAULT '0000-00-00 00:00:00',
  `TOTAL_PREMIUM` int(20) DEFAULT NULL,
  `INSURANCE_COMPANY_NAME` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `INSURANCE_POLICY_REQ_ESR_MAP_ID_FK` (`ESR_MAP_ID`),
  CONSTRAINT `INSURANCE_POLICY_REQ_ESR_MAP_ID_FK` FOREIGN KEY (`ESR_MAP_ID`) REFERENCES `EMP_SER_REQ_MAP` (`ID`) ON DELETE SET NULL
) ENGINE=InnoDB AUTO_INCREMENT=174 DEFAULT CHARSET=latin1;

INSERT INTO MODULES VALUES(62,'Insurance',35,1,'S-V-E-D');
INSERT INTO REQUEST_TYPE VALUES(15,'INSURANCE','INS',62);
##################################################### insurance Module db end  ###################################


############# vijay jayaram added new column IS_DELAYED on jan-28-2013 ###########################
ALTER TABLE `DIKSHA_PORTAL_2`.`TIME_SHEET_DETAILS` ADD COLUMN `IS_DELAYED` TINYINT(1)  NOT NULL AFTER `COMP_OFF`;

####################### visa details added by gurunat.rokkam on 31 jan 2013##########################
CREATE TABLE  `VISA_INFO` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `PASSPORT_ID` int(11) NOT NULL,
  `VISA_FROM` date DEFAULT NULL,
  `VISA_TO` date DEFAULT NULL,
  `VISA_TYPE` varchar(50) DEFAULT NULL,
  `COUNTRY` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `FK_VISA_INFO_PASSPORT_ID` (`PASSPORT_ID`),
  CONSTRAINT `FK_VISA_INFO_PASSPORT_ID` FOREIGN KEY (`PASSPORT_ID`) REFERENCES `PASSPORT_INFO` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB CHARSET=latin1;
######################### faq details added by gurunath.rokkam on 08/02/2013#####################
CREATE TABLE  `DIKSHA_PORTAL_2`.`FAQ` (
  `ID` int(10) NOT NULL auto_increment,
  `QUESTION` varchar(2500) NOT NULL,
  `ANSWER` text NOT NULL,
  PRIMARY KEY  (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

#######################################################

ALTER TABLE `DIKSHA_PORTAL_2`.`INSURANCE_POLICY_DETAILS` ADD COLUMN `ENDORSEMENT_NO` VARCHAR(45) AFTER `CARD_ID`;

######################## vijay jayaram added two new columns TRAVELLER_COMMENTS & SPOUSE_NAME on feb 11 2013 ########################
ALTER TABLE `DIKSHA_PORTAL_2`.`TRAVEL` ADD COLUMN `TRAVELLER_COMMENTS` TEXT  AFTER `PURPOSE_OF_TL`, ADD COLUMN `SPOUSE_NAME` VARCHAR(1000)  AFTER `TRAVELLER_COMMENTS`;

ALTER TABLE `DIKSHA_PORTAL_2`.`USERS` DROP FOREIGN KEY `USER_EXPERIENCE_ID`;
ALTER TABLE `DIKSHA_PORTAL_2`.`CANDIDATE` DROP FOREIGN KEY `CANDIDATE_EXPERIENCE_ID_FK`;



############################# vijay jayaram added new column REGION_ID on march-1-2013 #####################
ALTER TABLE `DIKSHA_PORTAL_2`.`RESUME_MANAGEMENT` ADD COLUMN `REGION_ID` INT  NOT NULL AFTER `IS_DELETE`;

###################################### Process chain escalation tables SQL queries  start ###################################

CREATE TABLE `ESCALATION` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `PC_ID` int(11) NOT NULL,
  `DUE_DAYS` int(11) DEFAULT NULL,
  `LEVEL_ID` int(11) DEFAULT NULL,
  `USERS_ID` varchar(100) DEFAULT NULL,
  `ESCAL_TO` varchar(255) NOT NULL COMMENT '0- Actual inbox entry, 1- Escalated entry, Actual inbox entry becomes 1. Also, Forwarded ack for requester, 2- Escalation inbox entry',
  `ESCAL_TYPE` varchar(10) NOT NULL,
  PRIMARY KEY (`ID`),
  constraint UK_PC_ID_USERS_ID unique key(PC_ID,USERS_ID),
  constraint UK_PC_ID_LEVEL_ID unique key(PC_ID,LEVEL_ID),
  constraint FK_PC_ID_ID foreign key(PC_ID) references PROCESS_CHAIN(ID) on delete cascade,
  constraint FK_LEVEL_ID_ID foreign key(LEVEL_ID) references LEVELS(ID) on delete cascade
	
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=latin1;
ALTER TABLE `INBOX` ADD COLUMN `IS_ESCALATED` TINYINT(1) NULL DEFAULT 0  AFTER `REQUEST_ID` ;
ALTER TABLE `INBOX` CHANGE COLUMN `SUBJECT` `SUBJECT` VARCHAR(200) NULL DEFAULT NULL  ;

###################################### Process chain escalation tables SQL queries  ends ####################################

######################### gurunath added for timesheet changes ###############################################
ALTER TABLE `USER_TASK_TIMESHEET_MAP`
 ADD COLUMN `MON` VARCHAR(300) NOT NULL DEFAULT '0.00|',
 ADD COLUMN `TUE` VARCHAR(300) NOT NULL DEFAULT '0.00|',
 ADD COLUMN `WED` VARCHAR(300) NOT NULL DEFAULT '0.00|',
 ADD COLUMN `THU` VARCHAR(300) NOT NULL DEFAULT '0.00|',
 ADD COLUMN `FRI` VARCHAR(300) NOT NULL DEFAULT '0.00|',
 ADD COLUMN `SAT` VARCHAR(300) NOT NULL DEFAULT '0.00|',
 ADD COLUMN `SUN` VARCHAR(300) NOT NULL DEFAULT '0.00|';
 
UPDATE USER_TASK_TIMESHEET_MAP T SET 
MON=(SELECT HOURS_SPENT FROM USER_TASK_FILLED WHERE MAP_ID=T.ID LIMIT 0,1),
TUE=(SELECT HOURS_SPENT FROM USER_TASK_FILLED WHERE MAP_ID=T.ID LIMIT 1,1),
WED=(SELECT HOURS_SPENT FROM USER_TASK_FILLED WHERE MAP_ID=T.ID LIMIT 2,1),
THU=(SELECT HOURS_SPENT FROM USER_TASK_FILLED WHERE MAP_ID=T.ID LIMIT 3,1),
FRI=(SELECT HOURS_SPENT FROM USER_TASK_FILLED WHERE MAP_ID=T.ID LIMIT 4,1),
SAT=(SELECT HOURS_SPENT FROM USER_TASK_FILLED WHERE MAP_ID=T.ID LIMIT 5,1),
SUN=(SELECT HOURS_SPENT FROM USER_TASK_FILLED WHERE MAP_ID=T.ID LIMIT 6,1) WHERE (SELECT HOURS_SPENT FROM USER_TASK_FILLED WHERE MAP_ID=T.ID LIMIT 0,1) IS NOT NULL;


################### vijay jayaram added new table PERDIEM_MASTER_DATA on march 15 2013 #####################
CREATE TABLE PERDIEM_MASTER_DATA (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `USER_ID` int(11) NOT NULL,
  `PERDIEM` varchar(25) DEFAULT NULL,
  `PERDIEM_FROM` date DEFAULT NULL,
  `PERDIEM_TO` date DEFAULT NULL,
  `CURRENCY_TYPE` varchar(5) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;



########################## vijay jayaram added perdiem report related tables on march 15 2013 ###################

DROP TABLE IF EXISTS `DEP_PERDIEM`;
CREATE TABLE  `DEP_PERDIEM` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ESR_MAP_ID` int(11) NOT NULL,
  `TERM` varchar(2) NOT NULL,
  `MONTH` varchar(15) NOT NULL,
  `YEAR` int(4) NOT NULL,
  `SUBMITTED_ON` date DEFAULT NULL,
  `COMPLETED_ON` date DEFAULT NULL,
  `STATUS` varchar(50) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `ESR_PERDIEM_FK` (`ESR_MAP_ID`),
  CONSTRAINT `ESR_PERDIEM_FK` FOREIGN KEY (`ESR_MAP_ID`) REFERENCES `EMP_SER_REQ_MAP` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;


DROP TABLE IF EXISTS `DEP_PERDIEM_HISTORY`;
CREATE TABLE  `DEP_PERDIEM_HISTORY` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `DEP_ID` int(11) NOT NULL,
  `USER_ID` int(11) NOT NULL,
  `PERDIEM` varchar(25) NOT NULL,
  `PERDIEM_HISTORY` text,
  `PAYABLE_DAYS` int(11) NOT NULL,
  `PAYABLE_DAYS_HISTORY` varchar(100) DEFAULT NULL,
  `CURRENCY` varchar(5) NOT NULL,
  `CURRENCY_HISTORY` varchar(100) DEFAULT NULL,
  `PERDIEM_COMPUTED` varchar(25) DEFAULT NULL,
  `COMMENTS` text,
  PRIMARY KEY (`ID`),
  KEY `PERDIEM_HISTORY_FK` (`DEP_ID`),
  CONSTRAINT `PERDIEM_HISTORY_FK` FOREIGN KEY (`DEP_ID`) REFERENCES `DEP_PERDIEM` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;



DROP TABLE IF EXISTS `DEP_PERDIEM_REQ`;
CREATE TABLE  `DEP_PERDIEM_REQ` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `DEP_ID` int(11) NOT NULL,
  `SEQ_ID` int(11) NOT NULL,
  `ASSIGNED_TO` int(11) NOT NULL,
  `RECEIVED_ON` date DEFAULT NULL,
  `SUBMITTED_ON` date DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `PERDIEM_DEP_FK` (`DEP_ID`),
  CONSTRAINT `PERDIEM_DEP_FK` FOREIGN KEY (`DEP_ID`) REFERENCES `DEP_PERDIEM` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;


################### perdiem reconciliation module related data vijay jayaram 21-03-2013################ 
INSERT INTO `MODULES` VALUES  (64,'Monthly Reconciliation',35,1,'S-V-E-D');
INSERT INTO `REQUEST_TYPE` VALUES (16,'RECONCILIATION','MR',64);

################### salary reconciliation module related data gurunath.rokkam 02-04-2013################ 
INSERT INTO MODULES VALUES (65,"SALARY RECONCILIATION",35,1,"S-V-E-D");
INSERT INTO `REQUEST_TYPE` VALUES (17,'SALARY RECONCILIATION','MSR',65);
INSERT INTO PROCESS_CHAIN(PROC_NAME,APPROVAL_CHAIN,HANDLER,FEATURE_ID) VALUES('IN_MSR','165;123','0,0,0,0|187',65);
INSERT INTO STATUS VALUES(54,'Generated'),(55,'Re-Submitted');

####################################### SALARY RESTUCTURE database changes begin #######################################
CREATE TABLE `SALARY_CONFIG` (
  `ID` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `HEAD` varchar(50) DEFAULT NULL,
  `COMPONENT` varchar(100) NOT NULL,
  `VALUE` decimal(30,15) DEFAULT NULL,
  `VALUE_TYPE` varchar(10) DEFAULT NULL,  
  `AUTO_CALC` bit(1) DEFAULT NULL,
  `FORMULA` decimal(20,5) DEFAULT NULL,
  `HEAD_ORDER` int(3) DEFAULT '0',
  `COMPONENT_ORDER` int(2) DEFAULT '0',
  
  PRIMARY KEY (`ID`),
  CONSTRAINT chk_HEAD CHECK(`HEAD` IN ('BASIC','ALLOWANCE','BENEFITS','VARIABLES','INSURANCE')),
  CONSTRAINT chk_HEAD CHECK(`HEAD` IN ('BASIC','ALLOWANCE','BENEFITS','VARIABLES','INSURANCE')),
  CONSTRAINT chk_VALUE_TYPE CHECK(`VALUE_TYPE` IN ('PERCENT','RAW','PERDIEM')),
  CONSTRAINT uk_HEAD_COMPONENT_ORDER UNIQUE(HEAD,COMPONENT_ORDER)
) ENGINE=InnoDB AUTO_INCREMENT=16 DEFAULT CHARSET=latin1;

ALTER TABLE SALARY_DETAILS MODIFY COLUMN FIELD_LABEL VARCHAR(150);
ALTER TABLE SALARY_DETAILS ADD COLUMN `SAL_ID` int(11) unsigned DEFAULT NULL AFTER `FIELDTYPE`;
ALTER TABLE SALARY_DETAILS ADD CONSTRAINT `fk_SALARY_DETAILS_SALARY_CONFIG` FOREIGN KEY (`SAL_ID`) REFERENCES `SALARY_CONFIG` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE SALARY_FOR_APPROVAL MODIFY COLUMN FIELD_LABEL VARCHAR(150);
ALTER TABLE SALARY_FOR_APPROVAL ADD COLUMN `SAL_ID` int(11) unsigned DEFAULT NULL AFTER `FIELDTYPE`;
ALTER TABLE SALARY_FOR_APPROVAL ADD CONSTRAINT `fk_SALARY_FOR_APPROVAL_SALARY_CONFIG` FOREIGN KEY (`SAL_ID`) REFERENCES `SALARY_CONFIG` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION;

INSERT INTO `SALARY_CONFIG`
(`ID`,
`HEAD`,
`HEAD_ORDER`,
`COMPONENT`,
`VALUE`,
`VALUE_TYPE`,
`AUTO_CALC`,
`COMPONENT_ORDER`,
`FORMULA`)
VALUES
(1, 'A - BASIC', 1, 'Basic Salary', 0.300000000000000, 'PERCENT', 1, 1, 40.00000),
(2, 'B - ALLOWANCE', 2, 'Conveyance', 9600.000000000000000, 'RAW', 0, 1, 9600.00000),
(3, 'B - ALLOWANCE', 2, 'HRA', 0.225000000000000, 'PERCENT', 1, 2, 30.00000),
(4, 'B - ALLOWANCE', 2, 'Additional Allowances', 0.225000000000000, 'RAW', 1, 3, 0.00000),
(5, 'C - BENEFITS', 3, 'Flexi Benefit Plan(FBP)', 0.250000000000000, 'PERCENT', 1, 1, 25.00000),
(6, 'C - BENEFITS', 3, 'Employer contribution to Insurance Premium', 3400.000000000000000, 'RAW', 0, 2, 3400.00000),
(7, 'C - BENEFITS', 3, 'Employer contribution to Provident Fund', 0.036000000000000, 'PERCENT', 0, 3, 12.00000),
(8, 'C - BENEFITS', 3, 'Employer contribution to Gratuity', 0.014423076000000, 'PERCENT', 1, 4, 4.80769),
(9, 'D - VARIABLES', 4, 'Quarterly Performance linked Bonus(QPLB)', 0.023437500000000, 'PERCENT', 1, 1, 75.00000),
(10, 'D - VARIABLES', 4, 'Annual performance linked Incentive(APLI)', 0.007812500000000, 'PERCENT', 1, 2, 25.00000),
(11, 'D - VARIABLES', 4, 'Per Diem', 0.000000000000000, 'PERDIEM', 0, '3', 0.00000),
(12, 'INSURANCE', 6, 'Mediclaim Policy(Self & Spouse each)', 200000.000000000000000, 'RAW', 0, 1, -1.00000),
(13, 'INSURANCE', 6, 'Personal Accident Policy(Self & Spouse)', 100000.000000000000000, 'RAW', 0, 2, -1.00000),
(14, 'CONFIG', 100, 'CTC', 0.000000000000000, NULL, '0', 1, 0.00000),
(15, 'CONFIG', 100, 'PERDIEM', 0.000000000000000, NULL, '0', 2, 0.00000);
####################################### SALARY RESTUCTURE database changes end #######################################



################################ FBP Alter Queries ####################################################
INSERT INTO MODULES(ID,NAME,PARENT_ID,IS_PROC_CHAIN,PERMISSION_TYPES)
values('66', 'Tax Benefit', '0', '1', 'S-V-E-D');

INSERT INTO MODULES(ID,NAME,PARENT_ID,IS_PROC_CHAIN,PERMISSION_TYPES) values('67', 'Flexi-benefit Plan', '66', '1', 'S-V-E-D');
#INSERT INTO REQUEST_TYPE (NAME, ABBREVATION, FEATURE_ID) VALUES ( 'FLEXI BENEFIT PLAN', 'FBP', '67');
#INSERT INTO MODULE_PERMISSION (ROLE_ID, MODULE_ID, PROC_CHAIN_ID, ACCESSIBILITY_ID) VALUES ( '19', '67', '72', '680') ;
INSERT INTO PROCESS_CHAIN ( PROC_NAME, APPROVAL_CHAIN, NOTIFICATION, HANDLER, FEATURE_ID) values( 'IN_FBP_PROC', 'RM;HRSPOC;52', '1,0,0,0|HRSPOC,234,RM', '1,0,0,0|117,145', '67');


########### FBP_CONFIG TABLE ####################

delimiter $$

CREATE TABLE `FBP_CONFIG` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `LEVEL_ID` int(11) NOT NULL,
  `LEVEL` varchar(45) DEFAULT NULL,
  `LTA` varchar(45) DEFAULT NULL,
  `TPA` varchar(45) DEFAULT NULL,
  `MA` varchar(45) DEFAULT NULL,
  `CEA` varchar(45) DEFAULT NULL,
  `MV` varchar(45) DEFAULT NULL,
  `TRA` varchar(45) DEFAULT NULL,
  `OA` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `LEVEL_FBP_FK_idx` (`LEVEL_ID`),
  CONSTRAINT `LEVEL_FBP_FK` FOREIGN KEY (`LEVEL_ID`) REFERENCES `LEVELS` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB  DEFAULT CHARSET=latin1$$

################# FBP_REQ  ############################
delimiter $$
CREATE TABLE `FBP_REQ` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `USER_ID` int(11) NOT NULL,
  `LEVEL_ID` int(11) DEFAULT NULL,
  `LEVEL` varchar(45) DEFAULT NULL,
  `MONTH_ID` varchar(45) DEFAULT NULL,
  `ESR_MAP_ID` int(11) DEFAULT NULL,
  `CREATED_ON` datetime DEFAULT NULL,
  `STATUS` varchar(45) DEFAULT NULL,
  `SEQUENCE` int(11) DEFAULT '0',
  `MESSAGE_BODY` longtext,
  `FREQUENT` varchar(45) DEFAULT NULL,
  `COMMENTS` longtext,
  PRIMARY KEY (`ID`),
  KEY `FK_USERS_idx` (`USER_ID`),
  KEY `FK_LEVELS_idx` (`LEVEL_ID`),
  KEY `FK_ESR_MAP_idx` (`ESR_MAP_ID`),
  CONSTRAINT `FK_ESR_MAP` FOREIGN KEY (`ESR_MAP_ID`) REFERENCES `EMP_SER_REQ_MAP` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_LEVELS` FOREIGN KEY (`LEVEL_ID`) REFERENCES `LEVELS` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `FK_USERS` FOREIGN KEY (`USER_ID`) REFERENCES `USERS` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB  DEFAULT CHARSET=latin1$$
########### FBP_DETAILS TABLE ####################
delimiter $$

CREATE TABLE `FBP_DETAILS` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `FBP_ID` int(11) DEFAULT NULL,
  `FBP` varchar(45) DEFAULT NULL,
  `ELIGIBLE_AMT` varchar(45) DEFAULT NULL,
  `USED_AMT` varchar(45) DEFAULT NULL,
  `UNUSED_AMT` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `FK_FBP_REQ_idx` (`FBP_ID`),
  CONSTRAINT `FK_FBP_REQ` FOREIGN KEY (`FBP_ID`) REFERENCES `FBP_REQ` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB  DEFAULT CHARSET=latin1$$

################### inserting config records ###############

SELECT ID, LABEL FROM LEVELS
WHERE LABEL  like '<Give level name here>' order by ID;

INSERT INTO FBP_CONFIG (LEVEL_ID , `LEVEL`) 
(SELECT ID, LABEL FROM LEVELS WHERE LABEL  LIKE '<Give level name here, of previous query>' ORDER BY ID);

UPDATE FBP_CONFIG SET LTA = '15000', TPA = '12000', MA = '15000', CEA = '6000', MV = '26400' , 
TRA = 'NA', OA = 'UA'
WHERE `LEVEL` ='<Give level name here, of previous query>';

################# SALARY CALCULATION TABLE ###############
delimiter $$

CREATE TABLE `MONTHLY_PAYROLL` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `USERID` int(11) DEFAULT NULL,
  `COMPONENT` varchar(100) DEFAULT NULL,
  `Amount` varchar(100) DEFAULT NULL,
  `MONTHID` varchar(10) NOT NULL,
  `COMPONENT_TYPE` int(1) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `PAYROLL_USER_FK_idx` (`USERID`),
  CONSTRAINT `PAYROLL_USER_FK` FOREIGN KEY (`USERID`) REFERENCES `USERS` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1$$

################# TAX BENEFIT MASTER TABLE ###############
INSERT INTO MODULES(ID,NAME,PARENT_ID,IS_PROC_CHAIN,PERMISSION_TYPES)
values('68', 'Benefit declaration', '66', '1', 'S-V-E-D');

INSERT INTO `PROCESS_CHAIN`
(`ID`,`PROC_NAME`,`APPROVAL_CHAIN`,`NOTIFICATION`,`HANDLER`,`FEATURE_ID`)
VALUES
('82','IN_TAX_BENEFIT_PROC', NULL, '0,0,0,0|HRSPOC', '0,0,0,0|5,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,216,217,218,224,226,227', '68');

INSERT INTO REQUEST_TYPE (ID,NAME,ABBREVATION,FEATURE_ID)
VALUES
('18','TAX BENEFIT', 'TAX', '68');

INSERT INTO `STATUS`(`ID`,`STATUS`)VALUES(56,'Updated');

delimiter $$

CREATE TABLE `TAX_BENEFIT` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `NAME` varchar(150) NOT NULL,
  `MAX_LIMIT` varchar(50) DEFAULT NULL,
  `DESCRIPTION` varchar(250) DEFAULT NULL,
  `CATEGORY` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE KEY `NAME_UNIQUE` (`NAME`),
  UNIQUE KEY `UNIQUE_NAME_CATEGORY` (`NAME`,`CATEGORY`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1$$

################# TAX BENEFIT DECLARATION TABLE ###############
delimiter $$

CREATE TABLE `TAX_BENEFIT_DECLARATION` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `USERID` int(11) NOT NULL,
  `BENEFIT_ID` int(11) DEFAULT NULL,
  `AMOUNT` varchar(255) NOT NULL,
  `FINANCIAL_YEAR` varchar(12) NOT NULL DEFAULT 'NIL',
  `COMMENTS` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `TAX_BENEFIT_FK` (`BENEFIT_ID`),
  KEY `TAX_USER_FK` (`USERID`),
  CONSTRAINT `TAX_BENEFIT_FK` FOREIGN KEY (`BENEFIT_ID`) REFERENCES `TAX_BENEFIT` (`ID`),
  CONSTRAINT `TAX_USER_FK` FOREIGN KEY (`USERID`) REFERENCES `USERS` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=119 DEFAULT CHARSET=latin1$$

CREATE TABLE `TAX_BENEFIT_REQ` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ESR_MAP_ID` int(11) DEFAULT NULL,
  `REQUESTER_ID` int(11) DEFAULT NULL,
  `ACTION_BY` int(11) DEFAULT NULL,
  `STATUS` varchar(50) DEFAULT NULL,
  `CREATED_ON` date DEFAULT NULL,
  `ACTION_ON` date DEFAULT NULL,
  `MESSAGE_BODY` text,
  `COMMENTS` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `fk_TAX_BENEFIT_REQ_ESR_MAP_ID_idx` (`ESR_MAP_ID`),
  KEY `fk_TAX_BENEFIT_REQ_REQUESTER_ID_idx` (`REQUESTER_ID`),
  KEY `fk_TAX_BENEFIT_REQ_ACTION_BY_idx` (`ACTION_BY`),
  CONSTRAINT `fk_TAX_BENEFIT_REQ_ACTION_BY` FOREIGN KEY (`ACTION_BY`) REFERENCES `USERS` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_TAX_BENEFIT_REQ_ESR_MAP_ID` FOREIGN KEY (`ESR_MAP_ID`) REFERENCES `EMP_SER_REQ_MAP` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `fk_TAX_BENEFIT_REQ_REQUESTER_ID` FOREIGN KEY (`REQUESTER_ID`) REFERENCES `USERS` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=29 DEFAULT CHARSET=latin1$$

CREATE TABLE `TAX_BENEFIT_ACCEPT` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `USERID` int(11) NOT NULL,
  `BENEFIT_ID` int(11) DEFAULT NULL,
  `AMOUNT` varchar(255) NOT NULL,
  `FINANCIAL_YEAR` varchar(12) NOT NULL DEFAULT 'NIL',
  `COMMENTS` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `TAX_BENEFIT_ACCEPT_FK` (`BENEFIT_ID`),
  KEY `TAX_USER_ACCEPT_FK` (`USERID`),
  CONSTRAINT `TAX_BENEFIT_ACCEPT_FK` FOREIGN KEY (`BENEFIT_ID`) REFERENCES `TAX_BENEFIT` (`ID`),
  CONSTRAINT `TAX_USER_ACCEPT_FK` FOREIGN KEY (`USERID`) REFERENCES `USERS` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1$$

CREATE TABLE `TBD_HISTORY` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `TBD_ID` int(11) DEFAULT NULL,
  `USERID` int(11) NOT NULL,
  `BENEFIT_ID` int(11) DEFAULT NULL,
  `AMOUNT` varchar(255) NOT NULL,
  `FINANCIAL_YEAR` varchar(12) NOT NULL DEFAULT 'NIL',
  `COMMENTS` varchar(255) DEFAULT NULL,
  `STATUS` INT NOT NULL DEFAULT 0 comment '0-updated, 1- deleted',
  `UPDATED_ON` DATE NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `TAX_BENEFIT_HISTORY_FK` (`BENEFIT_ID`),
  KEY `TAX_USER_HISTORY_FK` (`USERID`),
  KEY `TAX_HISTORY_TBD_ID_FK` (`TBD_ID`),
  CONSTRAINT `TAX_BENEFIT_HISTORY_FK` FOREIGN KEY (`BENEFIT_ID`) REFERENCES `TAX_BENEFIT` (`ID`),
  CONSTRAINT `TAX_HISTORY_TBD_ID_FK` FOREIGN KEY (`TBD_ID`) REFERENCES `TAX_BENEFIT_DECLARATION` (`ID`),
  CONSTRAINT `TAX_USER_HISTORY_FK` FOREIGN KEY (`USERID`) REFERENCES `USERS` (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1$$

################# EMPLOYEE TDS TABLE ###############
delimiter $$

CREATE TABLE `TDS` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `MONTH_ID` varchar(45) NOT NULL,
  `USERID` int(11) DEFAULT NULL,
  `AMOUNT` varchar(255) DEFAULT NULL,
  `STATUS` int(11) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `TDS_USER_FK_idx` (`USERID`),
  CONSTRAINT `TDS_USER_FK` FOREIGN KEY (`USERID`) REFERENCES `USERS` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1$$

######### Basic Tax Benefits ##################

INSERT INTO `TAX_BENEFIT`(`ID`,`NAME`,`MAX_LIMIT`,`DESCRIPTION`,`CATEGORY`)
VALUES
('1', "Sec 10(13A)- House rent', NULL, 'For employee receiving HRA.The annual/total Rent Paid,\n if staying in a rented house and agree to submit Leave & Licence A'ment when required.", 'DEDUCTION U/S 10'),
('2', 'Sec 80D - Medical Insurance Premium', NULL, '(If the policy covers a senior citizen then exemption is Rs.20,000/-)', 'DEDUCTION UNDER CHAPTER - VI A'),
('3', 'Sec 80DD - Handicapped Dependent', NULL, '', 'DEDUCTION UNDER CHAPTER - VI A'),
('4', 'Sec 80E - Repayment of Loan for higher education (only Interest)', NULL, '', 'DEDUCTION UNDER CHAPTER - VI A'),
('5', 'Sec 80GG - Rent Paid', NULL, 'For employee not receiving HRA and is a member of a HUF (Hindu Undivided Family)\n without own residential accommodation whatsoever.', 'DEDUCTION UNDER CHAPTER - VI A'),
('6', 'Sec 80U - Handicapped ', NULL, 'Permanent disability has the effect of reduc­ing substantially\n his capacity to engage in a gainful employment or occupation.', 'DEDUCTION UNDER CHAPTER - VI A'),
('7', 'Sec 80CCG - Rajeev Gandhi Equity Saving Scheme', '25000', 'Investment max upto Rs.50,000, would get a deduction of 50%\n on the amount invested', 'DEDUCTION UNDER CHAPTER - VI A'),
('8', 'Sec 80TTA - Interest on saving a/c', '10000', '', 'DEDUCTION UNDER CHAPTER - VI A'),
('9', 'Sec 80EE -  Additional deduction of Rs. 1Lac on home loan interest (applicable only for FY2013-14)', '100000', '', 'DEDUCTION UNDER CHAPTER - VI A'),
('10', 'Any other Deduction (Please specify)', NULL, 'Others', 'DEDUCTION UNDER CHAPTER - VI A'),
('11', 'Contribution to Pension Fund (Jeevan Suraksha)', '100000', 'Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000', 'DEDUCTION U/S 80C'),
('12', 'Life Insurance Premium on life of self/spouse/child only', '100000', 'Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000', 'DEDUCTION U/S 80C'),
('13', 'Deferred Annuity', NULL, '', 'DEDUCTION U/S 80C'),
('14', 'Public Provident Fund in own name/spouse/child only', '100000', 'Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000', 'DEDUCTION U/S 80C'),
('15', 'ULIP of UTI/LIC in own name or spouse and child only', '100000', 'Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000', 'DEDUCTION U/S 80C'),
('16', 'Repayment of Housing Loan (Only principal)', '100000', 'Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000', 'DEDUCTION U/S 80C'),
('17', 'Contribution to Pension Fund or UTI or Notified Mutual Fund', '100000', 'Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000', 'DEDUCTION U/S 80C'),
('18', 'Investment in ELSS made in units of Notified Mutual Fund', '100000', 'Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000', 'DEDUCTION U/S 80C'),
('19', 'Children Tuition Fee: Restricted to a max of 2 Children', '100000', 'Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000', 'DEDUCTION U/S 80C'),
('20', 'Deposit in home loan account scheme of NHB/HDFC', '100000', 'Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000', 'DEDUCTION U/S 80C'),
('21', '5 yrs. Term deposit in a Sch.Bank', '100000', 'Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000', 'DEDUCTION U/S 80C'),
('22', 'Annuity/Pension Plan', '100000', 'Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000', 'DEDUCTION U/S 80CCC'),
('23', 'Notified Pension Scheme', '100000', 'Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000', 'DEDUCTION U/S 80CCD'),
('24', 'Interest on Housing Loan', '150000', 'On fully constructed accomodation only', 'DEDUCTION U/S 24'),
('25', 'Interest if the loan is taken before 01/04/99', '30000', 'On fully constructed accomodation only', 'DEDUCTION U/S 24'),
('26', 'Income From House Property', NULL, '', 'OTHER SOURCES OF INCOME'),
('27', 'Income From Other Sources', NULL, '', 'OTHER SOURCES OF INCOME');


######################## Tax calculator ##########################

INSERT INTO MODULES(ID,NAME,PARENT_ID,IS_PROC_CHAIN,PERMISSION_TYPES)
values('69', 'Tax calculator', '66', '1', 'S-V-E-D');

################ Making MODULE Tax Benefit ID: 66, Flexi-benefit Plan ID: 67, Benefit Declaration ID:68 ##########
################ and Tax calculator ID: 69 available to all users ################################################

###following query copies my link module records and paste it as tax benefit records
INSERT INTO MODULE_ACTION (ROLE_ID,MODULE_ID,ACTION_CHAIN)
SELECT ROLE_ID,66,'67,68,69' FROM MODULE_ACTION WHERE MODULE_ID=35;

INSERT INTO MODULE_PERMISSION (ROLE_ID,MODULE_ID,PROC_CHAIN_ID,ACCESSIBILITY_ID)
SELECT ROLE_ID,66,NULL,ACCESSIBILITY_ID FROM MODULE_PERMISSION WHERE MODULE_ID=2;

INSERT INTO MODULE_PERMISSION (ROLE_ID,MODULE_ID,PROC_CHAIN_ID,ACCESSIBILITY_ID)
SELECT MP.ROLE_ID,67,PC.ID,MP.ACCESSIBILITY_ID FROM MODULE_PERMISSION MP,PROCESS_CHAIN PC WHERE MODULE_ID=2 AND PC.FEATURE_ID=67;

INSERT INTO MODULE_PERMISSION (ROLE_ID,MODULE_ID,PROC_CHAIN_ID,ACCESSIBILITY_ID)
SELECT MP.ROLE_ID,68,PC.ID,MP.ACCESSIBILITY_ID FROM MODULE_PERMISSION MP,PROCESS_CHAIN PC WHERE MODULE_ID=2 AND PC.FEATURE_ID=68;

INSERT INTO MODULE_PERMISSION (ROLE_ID,MODULE_ID,PROC_CHAIN_ID,ACCESSIBILITY_ID)
SELECT ROLE_ID,69,NULL,ACCESSIBILITY_ID FROM MODULE_PERMISSION WHERE MODULE_ID=2;

###################################################################################################################



## perdiem history by vijay jayaram 06-June-2013
ALTER TABLE `DEP_PERDIEM_HISTORY` ADD COLUMN `MANAGER_ID` INTEGER  NOT NULL AFTER `USER_ID`,
ADD COLUMN `MANAGER_NAME` VARCHAR(32)  NOT NULL AFTER `MANAGER_ID`,
ADD COLUMN `PROJECT_NAME` VARCHAR(32)  NOT NULL AFTER `MANAGER_NAME`,
ADD COLUMN `ADDED_BY` INTEGER  NOT NULL AFTER `USER_ID`,
ADD COLUMN `MODIFIED_BY` INTEGER  NOT NULL AFTER `ADDED_BY`;

ALTER TABLE `DEP_PERDIEM` ADD COLUMN `HTML_STATUS` VARCHAR(500)  NOT NULL AFTER `STATUS`;

############################################################
UPDATE SALARY_DETAILS SET FIELD_LABEL='D - VARIABLES - Company performance linked Bonus(CPLB)' WHERE FIELD_LABEL='D - VARIABLES - Annual performance linked Incentive(APLI)';
UPDATE SALARY_CONFIG SET COMPONENT='Company performance linked Bonus(CPLB)' WHERE COMPONENT='Annual performance linked Incentive(APLI)';
UPDATE PROCESS_CHAIN SET APPROVAL_CHAIN="234;209,210;123;187,157", HANDLER="1,1,0,0|162,186" WHERE PROC_NAME="IN_DEPUTATION_PROC";

DROP TABLE IF EXISTS `SALARY_RECONCILIATION`;
CREATE TABLE  `SALARY_RECONCILIATION` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `ESR_MAP_ID` INT(10) NOT NULL,
  `MONTH` INT(2) NOT NULL,
  `YEAR` INT(4) NOT NULL,
  `STATUS` INT(10) NOT NULL,
  `CREATED_ON` DATE NOT NULL,
  `COMPLETED_ON` DATETIME DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `SALARY_RECONCILIATION_INDEX_1` (`ESR_MAP_ID`,`MONTH`,`YEAR`),
  CONSTRAINT `FK_SALARY_RECONCILIATION_1` FOREIGN KEY (`ESR_MAP_ID`) REFERENCES `EMP_SER_REQ_MAP` (`ID`) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;


DROP TABLE IF EXISTS `SALARY_REC_REPORT_HISTORY`;
CREATE TABLE  `SALARY_REC_REPORT_HISTORY` (
  `ID` DOUBLE NOT NULL AUTO_INCREMENT,
  `SRR_ID` DOUBLE NOT NULL,
  `SALARY` VARCHAR(500) NOT NULL,
  `PAYABLE_DAYS` INT(2) UNSIGNED NOT NULL,
  `TDS` VARCHAR(10) DEFAULT NULL,
  `MODIFIED_BY` VARCHAR(100) DEFAULT NULL,
  `MODIFIED_ON` DATETIME NOT NULL,
  `COMMENTS` VARCHAR(250) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `SALARY_REC_REPORT_HISTORY_IBFK_1` (`SRR_ID`),
  CONSTRAINT `SALARY_REC_REPORT_HISTORY_IBFK_1` FOREIGN KEY (`SRR_ID`) REFERENCES `SALARY_RECONCILIATION_REPORT` (`ID`) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=LATIN1 COMMENT='STRIORING EDITED DATA.';


DROP TABLE IF EXISTS `SALARY_RECONCILIATION_REPORT`;
CREATE TABLE  `SALARY_RECONCILIATION_REPORT` (
  `ID` DOUBLE NOT NULL AUTO_INCREMENT,
  `SR_ID` INT(10) NOT NULL,
  `USER_ID` INT(10) NOT NULL,
  `SALARY` VARCHAR(250) NOT NULL,
  `PAYABLE_DAYS` INT(2) NOT NULL,
  `COMMENTS` VARCHAR(500) DEFAULT NULL,
  `REPORTING_MANAGER` TINYTEXT,
  `PROJECT` VARCHAR(100) DEFAULT NULL,
  `MODIFIED_BY` VARCHAR(100) DEFAULT NULL,
  `MODIFIED_ON` DATETIME DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `SALARY_RECONCILATION_REPORT_INDEX` (`SR_ID`,`USER_ID`),
  CONSTRAINT `FK_SALARY_RECONCILIATION_REPORT_1` FOREIGN KEY (`SR_ID`) REFERENCES `SALARY_RECONCILIATION` (`ID`) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

DROP TABLE IF EXISTS `SALARY_RECONCILIATION_REQ`;
CREATE TABLE  `SALARY_RECONCILIATION_REQ` (
  `ID` INT(10) NOT NULL AUTO_INCREMENT,
  `SR_ID` INT(10) NOT NULL,
  `ASSIGNED_TO` INT(10) NOT NULL,
  `LEVEL` INT(10) NOT NULL,
  `COMMENTS` VARCHAR(450) DEFAULT NULL,
  `CREATED_ON` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `ACTION_BY` INT(11) DEFAULT '0',
  `ESCALATED_FROM` INT(11) DEFAULT '0',
  `ACTION_ON` DATETIME DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `SALARY_RECONCILATION_REQ_1` (`SR_ID`,`ASSIGNED_TO`,`LEVEL`,`ACTION_BY`,`ESCALATED_FROM`),
  CONSTRAINT `FK_SALARY_RECONCILIATION_REQ_1` FOREIGN KEY (`SR_ID`) REFERENCES `SALARY_RECONCILIATION` (`ID`) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;



DROP TABLE IF EXISTS `FBP_CONFIG`;
CREATE TABLE  `FBP_CONFIG` (
  `ID` int(11) NOT NULL auto_increment,
  `LEVEL_ID` int(11) NOT NULL,
  `LEVEL` varchar(45) default NULL,
  `LTA` varchar(45) default NULL,
  `TPA` varchar(45) default NULL,
  `MA` varchar(45) default NULL,
  `CEA` varchar(45) default NULL,
  `MV` varchar(45) default NULL,
  `TRA` varchar(45) default NULL,
  `OA` varchar(45) default NULL,
  PRIMARY KEY  (`ID`),
  KEY `LEVEL_FBP_FK_idx` (`LEVEL_ID`),
  CONSTRAINT `LEVEL_FBP_FK` FOREIGN KEY (`LEVEL_ID`) REFERENCES `LEVELS` (`ID`) ON DELETE NO ACTION ON UPDATE NO ACTION
) ENGINE=InnoDB AUTO_INCREMENT=221 DEFAULT CHARSET=latin1;

--
-- Dumping data for table `FBP_CONFIG`
--

/*!40000 ALTER TABLE `FBP_CONFIG` DISABLE KEYS */;
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES 
 (1,5,'L1','NA','NA','NA','NA','NA','NA','UA'),
 (2,6,'L1','NA','NA','NA','NA','NA','NA','UA'),
 (3,7,'L1','NA','NA','NA','NA','NA','NA','UA'),
 (4,8,'L1','NA','NA','NA','NA','NA','NA','UA'),
 (5,9,'L1','NA','NA','NA','NA','NA','NA','UA'),
 (6,10,'L1','NA','NA','NA','NA','NA','NA','UA'),
 (7,11,'L1','NA','NA','NA','NA','NA','NA','UA'),
 (8,13,'L1','NA','NA','NA','NA','NA','NA','UA'),
 (9,250,'L1','NA','NA','NA','NA','NA','NA','UA'),
 (10,12,'L2-F1','NA','NA','15000','NA','26400','NA','UA'),
 (11,81,'L2-F1','NA','NA','15000','NA','26400','NA','UA'),
 (12,116,'L2-F1','NA','NA','15000','NA','26400','NA','UA'),
 (13,160,'L2-F1','NA','NA','15000','NA','26400','NA','UA'),
 (14,161,'L2-F1','NA','NA','15000','NA','26400','NA','UA'),
 (15,192,'L2-F1','NA','NA','15000','NA','26400','NA','UA'),
 (16,193,'L2-F1','NA','NA','15000','NA','26400','NA','UA'),
 (17,194,'L2-F1','NA','NA','15000','NA','26400','NA','UA'),
 (18,195,'L2-F1','NA','NA','15000','NA','26400','NA','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES
 (19,233,'L2-F1','NA','NA','15000','NA','26400','NA','UA'),
 (20,14,'L2-F2','NA','NA','15000','NA','26400','NA','UA'),
 (21,84,'L2-F2','NA','NA','15000','NA','26400','NA','UA'),
 (22,117,'L2-F2','NA','NA','15000','NA','26400','NA','UA'),
 (23,138,'L2-F2','NA','NA','15000','NA','26400','NA','UA'),
 (24,139,'L2-F2','NA','NA','15000','NA','26400','NA','UA'),
 (25,162,'L2-F2','NA','NA','15000','NA','26400','NA','UA'),
 (26,189,'L2-F2','NA','NA','15000','NA','26400','NA','UA'),
 (27,191,'L2-F2','NA','NA','15000','NA','26400','NA','UA'),
 (28,196,'L2-F2','NA','NA','15000','NA','26400','NA','UA'),
 (29,197,'L2-F2','NA','NA','15000','NA','26400','NA','UA'),
 (30,198,'L2-F2','NA','NA','15000','NA','26400','NA','UA'),
 (31,199,'L2-F2','NA','NA','15000','NA','26400','NA','UA'),
 (32,242,'L2-F2','NA','NA','15000','NA','26400','NA','UA'),
 (33,244,'L2- F2','NA','NA','15000','NA','26400','NA','UA'),
 (34,24,'L2-F3','NA','NA','15000','NA','26400','NA','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES
 (35,25,'L2-F3','NA','NA','15000','NA','26400','NA','UA'),
 (36,26,'L2-F3','NA','NA','15000','NA','26400','NA','UA'),
 (37,28,'L2-F3','NA','NA','15000','NA','26400','NA','UA'),
 (38,29,'L2-F3','NA','NA','15000','NA','26400','NA','UA'),
 (39,87,'L2-F3','NA','NA','15000','NA','26400','NA','UA'),
 (40,118,'L2-F3','NA','NA','15000','NA','26400','NA','UA'),
 (41,140,'L2-F3','NA','NA','15000','NA','26400','NA','UA'),
 (42,163,'L2-F3','NA','NA','15000','NA','26400','NA','UA'),
 (43,186,'L2-F3','NA','NA','15000','NA','26400','NA','UA'),
 (44,243,'L2-F3','NA','NA','15000','NA','26400','NA','UA'),
 (45,41,'L3-E1','15000','12000','15000','12000','26400','NA','UA'),
 (46,83,'L3-E1','15000','12000','15000','12000','26400','NA','UA'),
 (47,119,'L3-E1','15000','12000','15000','12000','26400','NA','UA'),
 (48,141,'L3-E1','15000','12000','15000','12000','26400','NA','UA'),
 (49,164,'L3-E1','15000','12000','15000','12000','26400','NA','UA'),
 (50,165,'L3-E1','15000','12000','15000','12000','26400','NA','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES 
 (51,39,'L3-E2','15000','12000','15000','12000','26400','NA','UA'),
 (52,86,'L3-E2','15000','12000','15000','12000','26400','NA','UA'),
 (53,120,'L3-E2','15000','12000','15000','12000','26400','NA','UA'),
 (54,142,'L3-E2','15000','12000','15000','12000','26400','NA','UA'),
 (55,166,'L3-E2','15000','12000','15000','12000','26400','NA','UA'),
 (56,190,'L3-E2','15000','12000','15000','12000','26400','NA','UA'),
 (57,241,'L3-E2','15000','12000','15000','12000','26400','NA','UA'),
 (58,37,'L3-E3','15000','12000','15000','12000','26400','NA','UA'),
 (59,38,'L3-E3','15000','12000','15000','12000','26400','NA','UA'),
 (60,121,'L3-E3','15000','12000','15000','12000','26400','NA','UA'),
 (61,143,'L3-E3','15000','12000','15000','12000','26400','NA','UA'),
 (62,167,'L3-E3','15000','12000','15000','12000','26400','NA','UA'),
 (63,168,'L3-E3','15000','12000','15000','12000','26400','NA','UA'),
 (64,207,'L3-E3','15000','12000','15000','12000','26400','NA','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES 
 (65,40,'L4-D1','20000','24000','15000','12000','26400','32400','UA'),
 (66,47,'L4-D1','20000','24000','15000','12000','26400','32400','UA'),
 (67,51,'L4-D1','20000','24000','15000','12000','26400','32400','UA'),
 (68,97,'L4-D1','20000','24000','15000','12000','26400','32400','UA'),
 (69,122,'L4-D1','20000','24000','15000','12000','26400','32400','UA'),
 (70,144,'L4-D1','20000','24000','15000','12000','26400','32400','UA'),
 (71,169,'L4-D1','20000','24000','15000','12000','26400','32400','UA'),
 (72,170,'L4-D1','20000','24000','15000','12000','26400','32400','UA'),
 (73,49,'L4-D2','20000','24000','15000','12000','26400','32400','UA'),
 (74,50,'L4-D2','20000','24000','15000','12000','26400','32400','UA'),
 (75,52,'L4-D2','20000','24000','15000','12000','26400','32400','UA'),
 (76,101,'L4-D2','20000','24000','15000','12000','26400','32400','UA'),
 (77,123,'L4-D2','20000','24000','15000','12000','26400','32400','UA'),
 (78,145,'L4-D2','20000','24000','15000','12000','26400','32400','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES 
 (79,171,'L4-D2','20000','24000','15000','12000','26400','32400','UA'),
 (80,237,'L4-D2','20000','24000','15000','12000','26400','32400','UA'),
 (81,240,'L4-D2','20000','24000','15000','12000','26400','32400','UA'),
 (82,54,'L4-D3','20000','24000','15000','12000','26400','32400','UA'),
 (83,55,'L4-D3','20000','24000','15000','12000','26400','32400','UA'),
 (84,62,'L4-D3','20000','24000','15000','12000','26400','32400','UA'),
 (85,98,'L4-D3','20000','24000','15000','12000','26400','32400','UA'),
 (86,124,'L4-D3','20000','24000','15000','12000','26400','32400','UA'),
 (87,146,'L4-D3','20000','24000','15000','12000','26400','32400','UA'),
 (88,172,'L4-D3','20000','24000','15000','12000','26400','32400','UA'),
 (89,238,'L4-D3','20000','24000','15000','12000','26400','32400','UA'),
 (90,61,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (91,99,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (92,102,'L5-C1','30000','36000','15000','12000','26400','39600','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES 
 (93,104,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (94,125,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (95,126,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (96,147,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (97,148,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (98,173,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (99,174,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (100,200,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (101,201,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (102,202,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (103,203,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (104,204,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (105,209,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (106,217,'L5-C1','30000','36000','15000','12000','26400','39600','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES 
 (107,219,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (108,220,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (109,227,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (110,228,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (111,232,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (112,234,'L5-C1','30000','36000','15000','12000','26400','39600','UA'),
 (113,57,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (114,65,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (115,105,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (116,106,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (117,127,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (118,128,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (119,149,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (120,150,'L5-C2','30000','36000','15000','12000','26400','39600','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES 
 (121,175,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (122,176,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (123,205,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (124,208,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (125,210,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (126,218,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (127,221,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (128,222,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (129,225,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (130,226,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (131,230,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (132,235,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (133,236,'L5-C2','30000','36000','15000','12000','26400','39600','UA'),
 (134,63,'L5-C3','30000','36000','15000','12000','26400','39600','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES 
 (135,64,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (136,107,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (137,108,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (138,129,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (139,130,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (140,151,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (141,152,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (142,177,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (143,178,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (144,206,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (145,211,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (146,212,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (147,213,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (148,214,'L5-C3','30000','36000','15000','12000','26400','39600','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES 
 (149,215,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (150,216,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (151,223,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (152,224,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (153,229,'L5-C3','30000','36000','15000','12000','26400','39600','UA'),
 (154,66,'L6-B1','40000','48000','15000','12000','26400','39600','UA'),
 (155,109,'L6-B1','40000','48000','15000','12000','26400','39600','UA'),
 (156,131,'L6-B1','40000','48000','15000','12000','26400','39600','UA'),
 (157,153,'L6-B1','40000','48000','15000','12000','26400','39600','UA'),
 (158,179,'L6-B1','40000','48000','15000','12000','26400','39600','UA'),
 (159,67,'L6-B2','40000','48000','15000','12000','26400','39600','UA'),
 (160,110,'L6-B2','40000','48000','15000','12000','26400','39600','UA'),
 (161,132,'L6-B2','40000','48000','15000','12000','26400','39600','UA'),
 (162,154,'L6-B2','40000','48000','15000','12000','26400','39600','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES 
 (163,180,'L6-B2','40000','48000','15000','12000','26400','39600','UA'),
 (164,79,'L6-B3','40000','48000','15000','12000','26400','39600','UA'),
 (165,111,'L6-B3','40000','48000','15000','12000','26400','39600','UA'),
 (166,133,'L6-B3','40000','48000','15000','12000','26400','39600','UA'),
 (167,155,'L6-B3','40000','48000','15000','12000','26400','39600','UA'),
 (168,181,'L6-B3','40000','48000','15000','12000','26400','39600','UA'),
 (169,82,'L7-A1','50000','54000','15000','12000','26400','39600','UA'),
 (170,112,'L7-A1','50000','54000','15000','12000','26400','39600','UA'),
 (171,134,'L7-A1','50000','54000','15000','12000','26400','39600','UA'),
 (172,156,'L7-A1','50000','54000','15000','12000','26400','39600','UA'),
 (173,182,'L7-A1','50000','54000','15000','12000','26400','39600','UA'),
 (174,80,'L7-A2','50000','54000','15000','12000','26400','39600','UA'),
 (175,113,'L7-A2','50000','54000','15000','12000','26400','39600','UA'),
 (176,135,'L7-A2','50000','54000','15000','12000','26400','39600','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES 
 (177,157,'L7-A2','50000','54000','15000','12000','26400','39600','UA'),
 (178,183,'L7-A2','50000','54000','15000','12000','26400','39600','UA'),
 (179,239,'L7-A2','50000','54000','15000','12000','26400','39600','UA'),
 (180,77,'L7-A3','50000','54000','15000','12000','26400','39600','UA'),
 (181,114,'L7-A3','50000','54000','15000','12000','26400','39600','UA'),
 (182,136,'L7-A3','50000','54000','15000','12000','26400','39600','UA'),
 (183,158,'L7-A3','50000','54000','15000','12000','26400','39600','UA'),
 (184,184,'L7-A3','50000','54000','15000','12000','26400','39600','UA'),
 (185,88,'L8','50000','54000','15000','6000','26400','39600','UA'),
 (186,90,'L8','50000','54000','15000','6000','26400','39600','UA'),
 (187,91,'L8','50000','54000','15000','6000','26400','39600','UA'),
 (188,92,'L8','50000','54000','15000','6000','26400','39600','UA'),
 (189,103,'L8','50000','54000','15000','6000','26400','39600','UA'),
 (190,115,'L8','50000','54000','15000','6000','26400','39600','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES 
 (191,137,'L8','50000','54000','15000','6000','26400','39600','UA'),
 (192,159,'L8','50000','54000','15000','6000','26400','39600','UA'),
 (193,185,'L8','50000','54000','15000','6000','26400','39600','UA'),
 (194,245,'L2 - F1','NA','NA','15000','NA','26400','NA','UA'),
 (195,246,'L4 - D2','20000','24000','15000','12000','26400','32400','UA'),
 (196,247,'L4 - D3','20000','24000','15000','12000','26400','32400','UA'),
 (197,248,'L2 - F3','NA','NA','15000','NA','26400','NA','UA'),
 (198,249,'L3 - E1','15000','12000','15000','12000','26400','NA','UA'),
 (199,30,'L2','NA','NA','15000','NA','26400','NA','UA'),
 (200,31,'L2','NA','NA','15000','NA','26400','NA','UA'),
 (201,32,'L2','NA','NA','15000','NA','26400','NA','UA'),
 (202,34,'L3','15000','12000','15000','6000','26400','NA','UA'),
 (203,35,'L3','15000','12000','15000','6000','26400','NA','UA'),
 (204,36,'L3','15000','12000','15000','6000','26400','NA','UA'),
 (205,42,'L3','15000','12000','15000','6000','26400','NA','UA');
INSERT INTO `FBP_CONFIG` (`ID`,`LEVEL_ID`,`LEVEL`,`LTA`,`TPA`,`MA`,`CEA`,`MV`,`TRA`,`OA`) VALUES
 (206,44,'L4','20000','24000','15000','6000','26400','32400','UA'),
 (207,45,'L4','20000','24000','15000','6000','26400','32400','UA'),
 (208,46,'L4','20000','24000','15000','6000','26400','32400','UA'),
 (209,48,'L4','20000','24000','15000','6000','26400','32400','UA'),
 (210,58,'L5','30000','36000','15000','6000','26400','39600','UA'),
 (211,59,'L5','30000','36000','15000','6000','26400','39600','UA'),
 (212,60,'L5','30000','36000','15000','6000','26400','39600','UA'),
 (213,69,'L6','40000','48000','15000','6000','26400','39600','UA'),
 (214,70,'L6','40000','48000','15000','6000','26400','39600','UA'),
 (215,71,'L6','40000','48000','15000','6000','26400','39600','UA'),
 (216,72,'L6','40000','48000','15000','6000','26400','39600','UA'),
 (217,74,'L7','50000','54000','15000','6000','26400','39600','UA'),
 (218,75,'L7','50000','54000','15000','6000','26400','39600','UA'),
 (219,76,'L7','50000','54000','15000','6000','26400','39600','UA'),
 (220,78,'L7','50000','54000','15000','6000','26400','39600','UA');
 (221,187,'L9','150000','36000','15000','2400','26400','39600','UA');

/*!40000 ALTER TABLE `FBP_CONFIG` ENABLE KEYS */;


--
-- Definition of table `TAX_BENEFIT`
--

DROP TABLE IF EXISTS `TAX_BENEFIT`;
CREATE TABLE  `TAX_BENEFIT` (
  `ID` int(11) NOT NULL auto_increment,
  `NAME` varchar(150) NOT NULL,
  `MAX_LIMIT` varchar(50) default NULL,
  `DESCRIPTION` varchar(250) default NULL,
  `CATEGORY` varchar(100) default NULL,
  PRIMARY KEY  (`ID`),
  UNIQUE KEY `NAME_UNIQUE` (`NAME`),
  UNIQUE KEY `UNIQUE_NAME_CATEGORY` (`NAME`,`CATEGORY`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `TAX_BENEFIT`
--

/*!40000 ALTER TABLE `TAX_BENEFIT` DISABLE KEYS */;
INSERT INTO `TAX_BENEFIT` (`NAME`,`MAX_LIMIT`,`DESCRIPTION`,`CATEGORY`) VALUES
 ('The amount of exemption in respect of house rent allowance(HRA) received by an employee',NULL,'For employee receiving HRA.The annual/total Rent Paid, if staying in a rented house and agree to submit Leave & Licence A\'ment when required.',' Exemption U/S 10(13A)'),
 ('Interest on Housing Loan','150000','On fully constructed accomodation only','Deduction U/S 24'),
 ('Interest if the loan is taken before 01/04/99','30000','On fully constructed accomodation only','Deduction U/S 24'),
(' Life Insurance Premium payment(self and Family)','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C'),
 (' Employee\'s contribution to PF','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C'),
 (' PPF (Public Provident Fund)',NULL,'Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C'),
 (' Equity Tax saver Mutual Funds - ELSS','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C'),
 (' National Savings Certificate (NSC) deposit','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C'),
 (' National Service Scheme (NSS) deposit','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C');
INSERT INTO `TAX_BENEFIT` (`NAME`,`MAX_LIMIT`,`DESCRIPTION`,`CATEGORY`) VALUES
 (' Senior Citizen Savings Scheme (SCSS) deposit','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C'),
 (' Post Office/Tax saving Bonds investments','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C'),
 (' Children Tution Fees paid','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C'),
 (' Housing Loan Principal repayment','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C'),
 (' Tax saving Fixed Deposit for 5 yrs. or more','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C');
 INSERT INTO `TAX_BENEFIT` (`NAME`,`MAX_LIMIT`,`DESCRIPTION`,`CATEGORY`) VALUES
 (' Stamp Duty/Registration charges for house','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C'),
 ('ULIP of UTI/LIC (self/spouse/children)','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C'),
 (' Other Eligible Investments','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80C'),
 ('Annuity/Pension Plan','100000','Aggregate Deduction U/S 80C, 80CCC & 80CCD cannot exceed Rs. 100000','Deduction U/S 80CCC'),
 ('80D (Medical insurance premium for Self and/or Family)','',NULL,'Deduction U/S 80D/80DD/80DDB'),
 ('80D (Medical insurance premium for Parents)',NULL,NULL,'Deduction U/S 80D/80DD/80DDB'),
 ('80DDB (Medical treatment for specific diseases)(Patient Below 65 years)','40000',NULL,'Deduction U/S 80D/80DD/80DDB'),
 ('80E Interest paid on Higher Education Loan',NULL,NULL,'Deduction U/S 80E / 80EE'),
 ('80EE Income tax benefit on interest on home loan (1st time buyers)',NULL,NULL,'Deduction U/S 80E / 80EE'),
 ('80G Donations for charitable purposes',NULL,'Any Donations made eligeble for Tax Deductions','Deduction U/S 80G / 80GG /80GGA / 80GGC'),
 ('Income by way of Dividends',NULL,NULL,'Income from other sources'),
 ('Income from Rent on building / property / Machinery / Plant or furniture',NULL,NULL,'Income from other sources'),
 ('From any fund/foundation/ Educational institution/ hospital/ medical institutions/ trust or any institution u/s 10(23C);',NULL,NULL,'Income from other sources'),
 ('Any other income (Lotteries , interest on securities / bonds',NULL,NULL,'Income from other sources');
/*!40000 ALTER TABLE `TAX_BENEFIT` ENABLE KEYS */;

##########candidate checklist by vijay jayaram june 27 2013
CREATE TABLE  `CANDIDATE_CHECKLIST_DOCS` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `NAME` varchar(150) NOT NULL,
  `PARENT_ID` int(11) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=15 DEFAULT CHARSET=latin1;

INSERT INTO `CANDIDATE_CHECKLIST_DOCS` VALUES  (1,'Date of birth (Supporting Document)',0),
 (2,'Photo identification and Address proof (Supporting Document)',0),
 (3,'Educational qualifications (10th and 12th Marks Sheet)',0),
 (4,'Professional qualifications (Degree/ Diploma Marks sheet as well as Degree Certificate)',0),
 (5,'Offer letter/Contract Letter (If Applicable)',0),
 (6,'Contract Renewal Letters (If Applicable)',0),
 (7,'Relieving Letter / Contract Termination letter  (If Applicable)',0),
 (8,'Experience Certificate (If Applicable)',0),
 (9,'Last 3 months Salary Slip, if applicable',0),
 (10,'Copy of the Permanent Account Number (PAN) card/ Acknowledgement of application.',0),
 (11,'Form 16 from the previous employer, if applicable',0),
 (12,'Latest Six passport size Photographs',0),
 (13,'Scanned copy of passport - identification and the last page (With all Visa Stampings if Worked Onsite)',0);

 
 CREATE TABLE  `CANDIDATE_CHECKLIST_STATUS` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `CAND_ID` int(11) NOT NULL,
  `CHKLST_DOC_ID` int(11) NOT NULL,
  `DOC_ID` int(11) NOT NULL,
  `IS_UPLOADED` int(11) NOT NULL,
  `STATUS` varchar(20) NOT NULL,
  `COMMENTS` varchar(500) DEFAULT NULL,
  PRIMARY KEY (`ID`),
  KEY `cds_cand_id_fk_constraint` (`CAND_ID`),
  KEY `cds_cd_id_fk_constraint` (`CHKLST_DOC_ID`),
  KEY `cds_docs_id_constraint` (`DOC_ID`),
  CONSTRAINT `cds_cand_id_fk_constraint` FOREIGN KEY (`CAND_ID`) REFERENCES `CANDIDATE` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `cds_cd_id_fk_constraint` FOREIGN KEY (`CHKLST_DOC_ID`) REFERENCES `CANDIDATE_CHECKLIST_DOCS` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE  
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;

############### exit changes ########################

UPDATE EXIT_QUESTIONS SET QUESTION="What is Employees main  reason for resigning?" WHERE ID=1;
UPDATE EXIT_QUESTIONS SET QUESTION="Were there any expectations employee had when he/she joined the company that were not met?" WHERE ID=2;
UPDATE EXIT_QUESTIONS SET QUESTION="Does the employee have any concerns regarding compensation, designation, benefits, Policy and Practices. (Please mention if there are any other concerns)" WHERE ID=3;
UPDATE EXIT_QUESTIONS SET QUESTION="Has the employee shared his/her concerns with anyone in the company prior to the decision of resigning?" WHERE ID=4;
UPDATE EXIT_QUESTIONS SET QUESTION="Has the company helped the employee to fulfill the career goals?" WHERE ID=5;
UPDATE EXIT_QUESTIONS SET QUESTION="What  the new company offers that Diksha does not?" WHERE ID=6;
UPDATE EXIT_QUESTIONS SET QUESTION="If there is any other input/suggestion or concern from employee, other than the above questions." WHERE ID=7;
UPDATE EXIT_QUESTIONS SET QUESTION="Was the employee happy working in Diksha with his current roles and responsibilities?" WHERE ID=14;
UPDATE EXIT_QUESTIONS SET QUESTION="Was the employee satisfied with compensation , Benefits and designation?" WHERE ID=15;
UPDATE EXIT_QUESTIONS SET QUESTION="Anything that Diksha can  do to retain the employee" WHERE ID=16;
UPDATE EXIT_QUESTIONS SET QUESTION="Is there any Impact on Project / Client" WHERE ID=17;
UPDATE EXIT_QUESTIONS SET QUESTION="Any Positive/Negative feedback you received from the employee about the Company/policy/practice/SPOC etc." WHERE ID=18;
UPDATE EXIT_QUESTIONS SET QUESTION="Do you need a replacement for the resource. (If yes , how soon)" WHERE ID=19;
UPDATE EXIT_QUESTIONS SET QUESTION="Where would you rate this employee from 1-5 ( 1 being poor and 5 being excellent)" WHERE ID=20;
UPDATE EXIT_QUESTIONS SET QUESTION="Comments / Feedback / Suggestion (if any from RM or employee)" WHERE ID=21;


############ timesheet notification excluding data ########################

CREATE TABLE  `CONSULTANTS` (
  `USER_ID` INT(11) NOT NULL,
  PRIMARY KEY (`USER_ID`),
  CONSTRAINT `FK_CONSULTANTS_1` FOREIGN KEY (`USER_ID`) REFERENCES `USERS` (`ID`) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=LATIN1 COMMENT='TO SKIP FROM TIMESHEET NOTIFICATIONS';

## 
############ perdiem history     perdiem computed column width increased ############################
ALTER TABLE `DEP_PERDIEM_HISTORY` MODIFY COLUMN `PERDIEM_COMPUTED` VARCHAR(100)  CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;
############ MENU CHANGE ###########
INSERT INTO MODULES (ID, NAME, PARENT_ID, IS_PROC_CHAIN, PERMISSION_TYPES) VALUES (70,'My References',0,0,'S-V-E-D');
UPDATE MODULES SET PARENT_ID=70, NAME = 'Employee Separation' WHERE ID = 63;
UPDATE MODULES SET PARENT_ID=70 WHERE ID = 60;
UPDATE MODULES SET NAME = 'My Financials' WHERE ID=66;
UPDATE MODULES SET PARENT_ID=66 WHERE ID IN (37,62,67,68,69);
UPDATE MODULE_ACTION SET ACTION_CHAIN = REPLACE(ACTION_CHAIN,'37,','') WHERE MODULE_ID=35;
UPDATE MODULE_ACTION SET ACTION_CHAIN = REPLACE(ACTION_CHAIN,',37','') WHERE MODULE_ID=35;
UPDATE MODULE_ACTION SET ACTION_CHAIN = REPLACE(ACTION_CHAIN,'62,','') WHERE MODULE_ID=35;
UPDATE MODULE_ACTION SET ACTION_CHAIN = REPLACE(ACTION_CHAIN,',62','') WHERE MODULE_ID=35;
UPDATE MODULE_ACTION SET ACTION_CHAIN = REPLACE(ACTION_CHAIN,'60,','') WHERE MODULE_ID=35;
UPDATE MODULE_ACTION SET ACTION_CHAIN = REPLACE(ACTION_CHAIN,',60','') WHERE MODULE_ID=35;
UPDATE MODULE_ACTION SET ACTION_CHAIN = REPLACE(ACTION_CHAIN,'63,','') WHERE MODULE_ID=35;
UPDATE MODULE_ACTION SET ACTION_CHAIN = REPLACE(ACTION_CHAIN,',63','') WHERE MODULE_ID=35;
UPDATE MODULE_ACTION SET ACTION_CHAIN = '37,62,67,68,69' WHERE MODULE_ID=66;
UPDATE MODULES SET IS_PROC_CHAIN=0 WHERE ID=69;
INSERT INTO MODULE_ACTION ( ROLE_ID, MODULE_ID, ACTION_CHAIN) VALUES
 (1,70,'60,63'),
 (2,70,'60,63'),
 (3,70,'60,63'),
 (4,70,'60,63'),
 (5,70,'60,63'),
 (6,70,'60,63'),
 (7,70,'60,63'),
 (8,70,'60,63'),
 (9,70,'60,63'),
 (10,70,'60,63'),
 (11,70,'60,63'),
 (12,70,'60,63'),
 (13,70,'60,63'),
 (14,70,'60,63'),
 (15,70,'60,63'),
 (16,70,'60,63'),
 (17,70,'60,63'),
 (18,70,'60,63'),
 (19,70,'60,63'),
 (20,70,'60,63'),
 (21,70,'60,63'),
 (22,70,'60,63'),
 (23,70,'60,63'),
 (24,70,'60,63'),
 (25,70,'60,63'),
 (26,70,'60,63'),
 (27,70,'60,63');
set foreign_key_checks=1;
####################### salary in advance added ########################
CREATE TABLE  SALARY_IN_ADVANCE (
  `ID` INT(10) NOT NULL,
  `TOTAL` VARCHAR(45) NOT NULL,
  `MONTHLY` VARCHAR(45) NOT NULL,
  `CREATED_ON` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`ID`),
  CONSTRAINT `FK_SALARY_IN_ADVANCE_1` FOREIGN KEY (`ID`) REFERENCES `USERS` (`ID`) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=LATIN1 COMMENT='LOAN AMOUNT';
################### ROW COLOUR CHANGES IN EMPLOYEE MODULE ###########################
ALTER TABLE USERS CHANGE COLUMN SALARY_ID COMPLETE TINYINT(1) DEFAULT 0  ;
UPDATE USERS SET COMPLETE=0 WHERE COMPLETE IS NULL;
UPDATE USERS SET COMPLETE=1 WHERE EMP_ID=0;
################################################################################################################################
ALTER TABLE ROLL_ON ADD COLUMN `COMMENTS` VARCHAR(450) AFTER `ROLL_OFF_DATE`;



CREATE TABLE  `DEP_PERDIEM_REPORT` (
  `ID` int(10) unsigned NOT NULL auto_increment,
  `DEP_ID` int(11) NOT NULL,
  `USER_ID` int(11) NOT NULL,
  `PAYABLE_DAYS` float NOT NULL,
  `AMOUNT` varchar(150) default NULL,
  `CURRENCY_TYPE` int(10) unsigned NOT NULL,
  `MANAGER_ID` int(10) unsigned NOT NULL,
  `MANAGER_NAME` varchar(45) NOT NULL,
  `PROJECT_NAME` varchar(100) NOT NULL,
  `MODIFIED_BY` varchar(45) default NULL,
  `MODIFIED_ON` datetime default NULL,
  `IS_DELETED` tinyint(1) unsigned NOT NULL default '0',
  `COMMENTS` varchar(1000) default NULL,
  PRIMARY KEY  (`ID`),
  KEY `FK_DEP_PERDIEM_dep_id` (`DEP_ID`),
  KEY `FK_DEP_PERDIEM_USER_ID` (`USER_ID`),
  CONSTRAINT `FK_DEP_PERDIEM_dep_id` FOREIGN KEY (`DEP_ID`) REFERENCES `DEP_PERDIEM` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `FK_DEP_PERDIEM_USER_ID` FOREIGN KEY (`USER_ID`) REFERENCES `USERS` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB  DEFAULT CHARSET=latin1;

CREATE TABLE  `DEP_PERDIEM_REPORT_HISTORY` (
  `ID` int(10) unsigned NOT NULL auto_increment,
  `REP_ID` int(10) unsigned NOT NULL,
  `PAYABLE_DAYS` float NOT NULL,
  `AMOUNT` varchar(150) default NULL,
  `CURRENCY_TYPE` tinyint(3) unsigned NOT NULL,
  `MODIFIED_BY` varchar(45) default NULL,
  `MODIFIED_ON` datetime default NULL,
  `COMMENTS` varchar(1500) default NULL,
  `IS_DELETED` tinyint(1) unsigned zerofill NOT NULL,
  PRIMARY KEY  (`ID`),
  KEY `FK_DEP_PERDIEM_REPORT_HISTORY_1` (`REP_ID`),
  CONSTRAINT `FK_DEP_PERDIEM_REPORT_HISTORY_1` FOREIGN KEY (`REP_ID`) REFERENCES `DEP_PERDIEM_REPORT` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

######## changes after 28th aug build
## added for appraisal changes.....

ALTER TABLE `APPRAISAL` ADD COLUMN `VERSION` TINYINT UNSIGNED NOT NULL DEFAULT 0 AFTER `START_DATE`;

CREATE TABLE  `APPRAISAL_IDP` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `APPRAISAL_ID` INT(11) NOT NULL,
  `CAREER_PLAN` TEXT,
  `OBJECTIVES` TEXT,
  `SMART_GOALS` VARCHAR(2000) DEFAULT NULL,
  `FINAL_OBJECTIVES` VARCHAR(2000) DEFAULT NULL,
  `COMMENTS` VARCHAR(2000) DEFAULT NULL,
  `PROJECT_ACHIEVEMENTS` VARCHAR(2000) DEFAULT NULL,
  PRIMARY KEY  (`ID`),
  KEY `FK_APPRAISAL_IDP_1` (`APPRAISAL_ID`),
  CONSTRAINT `FK_APPRAISAL_IDP_1` FOREIGN KEY (`APPRAISAL_ID`) REFERENCES `APPRAISAL` (`ID`) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=LATIN1 COMMENT='ADDED FROM V1';

CREATE TABLE  `APPRAISAL_MINUTIAE` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `APPRAISAL_ID` INT(11) NOT NULL,
  `DESIGNATION` VARCHAR(45) DEFAULT ' ',
  `DIVISION` VARCHAR(45) DEFAULT ' ',
  `YEARS_IN_DIKSHA` VARCHAR(45) DEFAULT ' ',
  `TOTAL_EXPERIANCE` VARCHAR(45) DEFAULT ' ',
  `REVIEW_PERIOD` VARCHAR(45) DEFAULT ' ',
  `BILLABLE_DAYS` INT(11) DEFAULT '0',
  PRIMARY KEY  (`ID`),
  KEY `FK_APPRAISAL_MINUTIAE_1` (`APPRAISAL_ID`),
  CONSTRAINT `FK_APPRAISAL_MINUTIAE_1` FOREIGN KEY (`APPRAISAL_ID`) REFERENCES `APPRAISAL` (`ID`) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=LATIN1 COMMENT='ADDED FROM APPRAISAL V1, TO STORE SOME FIELDS';

CREATE TABLE  `APPRAISAL_PROJECTS` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `APPRAISAL_ID` INT(11) NOT NULL,
  `NAME` VARCHAR(100) NOT NULL,
  `CLIENT_NAME` VARCHAR(100) NOT NULL,
  `PROJECT_FROM` DATE NOT NULL,
  `PROJECT_TO` DATE NOT NULL,
  `FUNCTIONAL_AREA` VARCHAR(100) DEFAULT NULL,
  `PROJECT_TYPE` VARCHAR(45) DEFAULT NULL,
  `DETAILS` VARCHAR(5000) DEFAULT NULL,
  PRIMARY KEY  (`ID`),
  KEY `FK_APPRAISAL_PROJECTS_1` (`APPRAISAL_ID`),
  CONSTRAINT `FK_APPRAISAL_PROJECTS_1` FOREIGN KEY (`APPRAISAL_ID`) REFERENCES `APPRAISAL` (`ID`) ON DELETE CASCADE
) ENGINE=INNODB  DEFAULT CHARSET=LATIN1 COMMENT='ADD FROM V1';

CREATE TABLE  `APPRAISAL_QUESTIONS` (
  `ID` TINYINT(3) UNSIGNED NOT NULL AUTO_INCREMENT,
  `QUESTION` VARCHAR(200) NOT NULL,
  PRIMARY KEY  (`ID`)
) ENGINE=INNODB DEFAULT CHARSET=LATIN1 COMMENT='ADDED FROM V1';

INSERT INTO `APPRAISAL_QUESTIONS` (`ID`,`QUESTION`) VALUES 
 (1,'Requirement Analysis. Understanding client business and goals'),
 (2,'Core Competency Level'),
 (3,'Keep improving on the deadline viz finish earlier'),
 (4,'Solution Implementation & Documentation'),
 (5,'Testing Implementation & Documentation'),
 (6,'Ability to meet Customer KPI/SLAs'),
 (7,'Solution Analysis and Design. Ability to desing, plan and provide solution'),
 (8,'Design innovation'),
 (9,'Keeping one updated/informed of the latest technologies & trends'),
 (10,'Recognition of areas of weaknesses in their technical fields and efforts undertaken to improve on them'),
 (11,'Display an ongoing commitment to learning and self-improvement'),
 (12,'Ability to develop and adapt in areas outside the area of expertise '),
 (13,'Establishes and maintains effective relationship with clients'),
 (14,'Keeps the RM adequately informed regarding his work at client location (issues/leaves/timesheets Etc)'),
 (15,'Looks for ways to improve and promote quality'),
 (16,'Ability to work in a team');
INSERT INTO `APPRAISAL_QUESTIONS` (`ID`,`QUESTION`) VALUES 
 (17,'Offer assistance and support to coworkers '),
 (18,'Demonstrates Accountability'),
 (19,'Interaction and Co-ordination with SPOCS'),
 (20,"Work with the organisation's interests in mind"),
 (21,'Contribute in sharing knowledge and organizational learning activities'),
 (22,'Create positive influences on people around about the organisation'),
 (23,'Contribute to uplifting company morale & spirit');
 
CREATE TABLE  `APPRAISAL_RATINGS` (
  `ID` INT(11) NOT NULL AUTO_INCREMENT,
  `APPRAISAL_ID` INT(11) NOT NULL,
  `QUESTION_ID` TINYINT(4) NOT NULL,
  `APPRAISEE_RATING` TINYINT(4) NOT NULL,
  `APPRAISER_RATING` TINYINT(4) NOT NULL,
  PRIMARY KEY  (`ID`),
  KEY `FK_APPRAISAL_RATINGS_1` (`APPRAISAL_ID`),
  CONSTRAINT `FK_APPRAISAL_RATINGS_1` FOREIGN KEY (`APPRAISAL_ID`) REFERENCES `APPRAISAL` (`ID`) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=LATIN1 COMMENT='ADDED FROM V1';

CREATE TABLE  `FIXED_PERDIEM` (
  `ID` INT(11) NOT NULL,
  `PERDIEM` VARCHAR(25) DEFAULT NULL,
  `PERDIEM_FROM` DATE DEFAULT NULL,
  `PERDIEM_TO` DATE DEFAULT NULL,
  `CURRENCY_TYPE` VARCHAR(5) DEFAULT NULL,
  `MODIFIED_ON` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `MODIFIED_BY` INT(11) DEFAULT NULL,
  PRIMARY KEY  (`ID`)
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;
CREATE TABLE  `PERDIEM_IN_ADVANCE` (
  `ID` INT(10) NOT NULL,
  `TOTAL` VARCHAR(45) NOT NULL,
  `MONTHLY` VARCHAR(45) NOT NULL,
  `CREATED_ON` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY  (`ID`)
) ENGINE=INNODB DEFAULT CHARSET=LATIN1 COMMENT='LOAN AMOUNT';



##############################################

ALTER TABLE `DEP_PERDIEM` MODIFY COLUMN `TERM` VARCHAR(20) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL;
ALTER TABLE `DEP_PERDIEM_REPORT` CHANGE COLUMN `AMOUNT` `PERDIEM` VARCHAR(250) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL,
 CHANGE COLUMN `IS_DELETED` `TYPE` TINYINT(1) UNSIGNED NOT NULL DEFAULT 0 COMMENT '0=AUTO GEN,3=MODIFIED, 1=DELETED, 2= ADDED, 4=ADDED-DELETED,5=FIXED,6=FIXED-DELETED',
 ADD COLUMN `PERDIEM_FROM` DATE NOT NULL AFTER `COMMENTS`,
 ADD COLUMN `PERDIEM_TO` DATE NOT NULL AFTER `PERDIEM_FROM`,
 ADD COLUMN `AMOUNT` VARCHAR(250) NOT NULL AFTER `CURRENCY_TYPE`,
 ADD COLUMN `AMOUNT_INR` VARCHAR(250) AFTER `AMOUNT`,
 ADD COLUMN `TOTAL` VARCHAR(250) AFTER `AMOUNT_INR`;
 
ALTER TABLE `DEP_PERDIEM_REPORT` CHANGE COLUMN `PROJECT_NAME` `CLIENT_NAME` VARCHAR(100) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL;
 
 
 ALTER TABLE `DEP_PERDIEM_REPORT_HISTORY` CHANGE COLUMN `AMOUNT` `PERDIEM` VARCHAR(250) CHARACTER SET latin1 COLLATE latin1_swedish_ci NOT NULL ,
 CHANGE COLUMN `IS_DELETED` `TYPE` TINYINT(1) UNSIGNED NOT NULL DEFAULT 0 COMMENT '0=AUTO GEN,3=MODIFIED, 1=DELETED, 2= ADDED, 4=ADDED-DELETED,5=FIXED,6=FIXED-DELETED',
 ADD COLUMN `AMOUNT` VARCHAR(250) NOT NULL AFTER `CURRENCY_TYPE`,
 ADD COLUMN `AMOUNT_INR` VARCHAR(250) AFTER `AMOUNT`,
 ADD COLUMN `TOTAL` VARCHAR(250) AFTER `AMOUNT_INR`;

 
 DROP TABLE IF EXISTS `DEP_PERDIEM_COMPONENTS`;
CREATE TABLE  `DEP_PERDIEM_COMPONENTS` (
  `ID` int(10) unsigned NOT NULL auto_increment,
  `REP_ID` int(10) unsigned NOT NULL,
  `TYPE` tinyint(3) unsigned NOT NULL,
  `REASON` varchar(100) NOT NULL,
  `CURRENCY` int(10) unsigned NOT NULL,
  `AMOUNT` varchar(250) NOT NULL,
  `AMOUNT_INR` varchar(250) NOT NULL,
  `ADDED_BY` varchar(100) default NULL,
  `ADDED_ON` timestamp NOT NULL default CURRENT_TIMESTAMP,
  `COMMENTS` varchar(500) default NULL,
  PRIMARY KEY  (`ID`),
  KEY `index_2` (`REP_ID`),
  CONSTRAINT `FK_DEP_PERDIEM_COMPONENTS_1` FOREIGN KEY (`REP_ID`) REFERENCES `DEP_PERDIEM_REPORT` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='ADDITIONS/DEDUCTIONS FOR EACH USER';

DROP TABLE IF EXISTS `DEP_PERDIEM_EXCHANGE_RATES`;
CREATE TABLE  `DEP_PERDIEM_EXCHANGE_RATES` (
  `ID` int(10) unsigned NOT NULL auto_increment,
  `REP_ID` int(10) unsigned NOT NULL,
  `CURRENCY_TYPE` tinyint(3) unsigned NOT NULL,
  `AMOUNT` double NOT NULL,
  PRIMARY KEY  (`ID`),
  KEY `index_2` (`REP_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

DROP TABLE IF EXISTS `DEP_PERDIEM_LEAVE`;
CREATE TABLE  `DEP_PERDIEM_LEAVE` (
  `ID` int(10) unsigned NOT NULL auto_increment,
  `REP_ID` int(10) unsigned NOT NULL,
  `LEAVE_FROM` date NOT NULL,
  `LEAVE_TO` date NOT NULL,
  `DURATION` float NOT NULL,
  `CURRENCY` int(10) unsigned NOT NULL,
  `AMOUNT` varchar(250) NOT NULL,
  `AMOUNT_INR` varchar(250) NOT NULL,
  `ADDED_BY` varchar(100) default NULL,
  `ADDED_ON` timestamp NOT NULL default CURRENT_TIMESTAMP,
  `COMMENTS` varchar(500) default NULL,
  PRIMARY KEY  (`ID`),
  KEY `index_2` (`REP_ID`),
  CONSTRAINT `FK_DEP_PERDIEM_LEAVE_1` FOREIGN KEY (`REP_ID`) REFERENCES `DEP_PERDIEM_REPORT` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1 COMMENT='LEAVE ON DEPUTATION FOR EACH USER';

###### salary rec changes ##########
ALTER TABLE `SALARY_RECONCILIATION_REPORT` MODIFY COLUMN `PAYABLE_DAYS` DOUBLE NOT NULL;
ALTER TABLE `SALARY_REC_REPORT_HISTORY` MODIFY COLUMN `PAYABLE_DAYS` DOUBLE NOT NULL;
###### appraisal changes for support staff ######
INSERT INTO `APPRAISAL_QUESTIONS` (`ID`,`QUESTION`) VALUES 
 (24,'Builds an environment of mutual respect and trust'),
 (25,'Interaction and Co-ordination with Supervisors and peers'),
 (26,'Displays an ongoing commitment to learning and self-improvement'),
 (27,'Ability to express viewpoints and opinions in a well-balanced way'),
 (28,'Determined to keep going in the face of setbacks & criticism '),
 (29,'Passion and Enthusiasm '),
 (30,'Proactive and motivated'),
 (31,'Demonstrates Accountability'),
 (32,'Building and maintaining quality pipeline'),
 (33,'Ability to reduce hiring cost'),
 (34,'Efficiency in filling positions/meeting requirements');
INSERT INTO `APPRAISAL_QUESTIONS` (`ID`,`QUESTION`) VALUES 
 (35,'Ability to influence offer acceptance'),
 (36,'Ability to source potential candidates'),
 (37,'Interview scheduling efficiency'),
 (38,'Number of closures in the assessment year (not a combo option)'),
 (39,'Ability to effectively resolve employee issues'),
 (40,'Ability to reduce turnaround time in addressing issues'),
 (41,'Efficiency in implementing company policies'),
 (42,'Effectiveness in documentation'),
 (43,'Contribution towards improving quality of work'),
 (44,'Increase utilization of RMG practices '),
 (45,'Ability to introduce innovative practices'),
 (46,'Time spent on bank reconciliation'),
 (47,'Adherence to internal audit queries'),
 (48,'Accuracy in generating reports in a timely manner'),
 (49,'Accuracy in book keeping'),
 (50,'Ability to plan payments eg. Suppliers'),
 (51,'Efficiency in cost management and budgeting'),
 (52,'Efficiency in vendor management'),
 (53,'Ability to reduce turnaround time'),
 (54,'Ability to predict exigencies');
INSERT INTO `APPRAISAL_QUESTIONS` (`ID`,`QUESTION`) VALUES 
 (55,'Ability to ensure least downtime services'),
 (56,'Identify and implement areas of improvement '),
 (57,'Ensure high customer satisfaction and deepen client relationships.'),
 (58,'Ensuring client retention'),
 (59,'Develop & acquire new clients'),
 (60,'Upselling to existing customers'),
 (61,'Identify and implement areas of improvement '),
 (62,'Achieve given sales targets and growth ');
 
######## salary and perdiem hold #################
CREATE TABLE  `DEP_PERDIEM_HOLD` (
  `ID` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `REP_ID` INT(10) UNSIGNED NOT NULL,
  `USER_ID` INT(11) NOT NULL,
  `STATUS` INT(11) NOT NULL,
  `COMMENTS` VARCHAR(500) NOT NULL,
  `ACTION_ON` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `ESC_FROM` INT(10) UNSIGNED NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `DEP_PERDIEM_HOLD_INDEX` (`REP_ID`,`USER_ID`,`ESC_FROM`),
  CONSTRAINT `FK_DEP_PERDIEM_HOLD_1` FOREIGN KEY (`REP_ID`) REFERENCES `DEP_PERDIEM_REPORT` (`ID`) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;

CREATE TABLE  `SALARY_RECONCILIATION_HOLD` (
  `ID` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `REP_ID` INT(10) UNSIGNED NOT NULL,
  `USER_ID` INT(11) NOT NULL,
  `STATUS` INT(11) NOT NULL,
  `COMMENTS` VARCHAR(500) NOT NULL,
  `ACTION_ON` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `ESC_FROM` INT(10) UNSIGNED NOT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;
ALTER TABLE `DEP_PERDIEM_REPORT`,
 ADD COLUMN `ACCOUNT_TYPE` TINYINT UNSIGNED NOT NULL AFTER `PERDIEM_TO`;
 
 ALTER TABLE `SALARY_RECONCILIATION_REPORT` ADD COLUMN `STATUS` TINYINT UNSIGNED NOT NULL DEFAULT 0 AFTER `MODIFIED_ON`,
 ADD COLUMN `ACCOUNT_TYPE` TINYINT UNSIGNED NOT NULL DEFAULT 0  AFTER `STATUS`;
 
 CREATE TABLE  `FIXED_PERDIEM_CANDIDATE` (
  `ID` INT(10) UNSIGNED NOT NULL ,
  `FIXED_PERDIEM` VARCHAR(45),
  `CURRENCY_TYPE` VARCHAR(5) ,
   PRIMARY KEY (`ID`))ENGINE=INNODB DEFAULT CHARSET=LATIN1;
 
 
 ###################  added new tables BONUS RECONCILIATION -By Manoj( march 15 2014)  #####################

 
 DROP TABLE IF EXISTS `BONUS_MASTER_DATA`;
CREATE TABLE BONUS_MASTER_DATA (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `USER_ID` int(11) NOT NULL,
  `QUATERELY_BONUS` varchar(45) DEFAULT NULL,
  `COMPANY_BONUS` varchar(45) DEFAULT NULL,
  `MONTH`  varchar(25) DEFAULT NULL,
  `CURRENCY_TYPE` int(5) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;


DROP TABLE IF EXISTS `BONUS_RECONCILIATION`;
CREATE TABLE  `BONUS_RECONCILIATION` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ESR_MAP_ID` int(11) NOT NULL,
  `MONTH` varchar(15) NOT NULL,
  `YEAR` int(4) NOT NULL,
  `SUBMITTED_ON` date DEFAULT NULL,
  `COMPLETED_ON` date DEFAULT NULL,
  `STATUS` varchar(50) NOT NULL,
  `HTML_STATUS` varchar(50) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `ESR_BONUS_FK` (`ESR_MAP_ID`),
  CONSTRAINT `ESR_BONUS_FK` FOREIGN KEY (`ESR_MAP_ID`) REFERENCES `EMP_SER_REQ_MAP` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;

DROP TABLE IF EXISTS `BONUS_RECONCILIATION_REQ`;
CREATE TABLE  `BONUS_RECONCILIATION_REQ` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `BR_ID` int(11) NOT NULL,
  `SEQ_ID` int(11) NOT NULL,
  `ASSIGNED_TO` int(11) NOT NULL,
  `RECEIVED_ON` date DEFAULT NULL,
  `SUBMITTED_ON` date DEFAULT NULL,
  `IS_ESCALATED` int(11) NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `BONUS_DEP_FK` (`BR_ID`),
  CONSTRAINT `BONUS_DEP_FK` FOREIGN KEY (`BR_ID`) REFERENCES `BONUS_RECONCILIATION` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;



DROP TABLE IF EXISTS `BONUS_REC_HISTORY`;
CREATE TABLE  `BONUS_REC_HISTORY` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `BR_ID` int(11) NOT NULL,
  `USER_ID` int(11) NOT NULL,
  `ADDED_BY` int(11) DEFAULT NULL,
  `MODIFIED_BY` int(11) DEFAULT NULL,
  `MANAGER_ID` int(11) NOT NULL,
  `MANAGER_NAME` varchar(25) NOT NULL,
  `PROJECT_NAME` varchar(25) NOT NULL,
  `QUATERELY_BONUS` varchar(45) DEFAULT NULL,
  `COMPANY_BONUS` varchar(45) DEFAULT NULL,
  `QUATERELY_BONUS_HISTORY` varchar(25) DEFAULT NULL,
  `COMPANY_BONUS_HISTORY` varchar(25) DEFAULT NULL,
  `CURRENCY` varchar(5) NOT NULL,
  `CURRENCY_HISTORY` varchar(100) DEFAULT NULL,
  `QUATERELY_BONUS_COMPUTED` varchar(25) DEFAULT NULL,
  `COMPANY_BONUS_COMPUTED` varchar(25) DEFAULT NULL,
  `COMMENTS` text,
  PRIMARY KEY (`ID`),
  KEY `BONUS_HISTORY_FK` (`BR_ID`),
  CONSTRAINT `BONUS_HISTORY_FK` FOREIGN KEY (`BR_ID`) REFERENCES `BONUS_RECONCILIATION` (`ID`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=latin1;



DROP TABLE IF EXISTS `BONUS_REC_REPORT`;
CREATE TABLE  `BONUS_REC_REPORT` (
  `ID` int(10) unsigned NOT NULL auto_increment,
  `BR_ID` int(11) NOT NULL,
  `USER_ID` int(11) NOT NULL,
  `QUATERELY_BONUS` varchar(45) DEFAULT NULL,
  `COMPANY_BONUS` varchar(45) DEFAULT NULL,
  `QUA_AMOUNT` varchar(45) DEFAULT NULL,
  `QUA_AMOUNT_INR` varchar(45) DEFAULT NULL,
  `COM_AMOUNT` varchar(45) DEFAULT NULL,
  `COM_AMOUNT_INR` varchar(45) DEFAULT NULL,
  `MANAGER_ID` int(10) unsigned NOT NULL,
  `MANAGER_NAME` varchar(45) NOT NULL,
  `CLIENT_NAME` varchar(100) NOT NULL,
  `MODIFIED_BY` varchar(45) default NULL,
  `MODIFIED_ON` datetime default NULL,
  `TYPE` tinyint(1) unsigned NOT NULL ,
  `ACCOUNT_TYPE` tinyint(1) unsigned NOT NULL ,
  `TOTAL` varchar(45) default NULL,
  `CURRENCY_TYPE` int(10) unsigned NOT NULL,
  `MONTH` varchar(25) NOT NULL,
  `COMMENTS` varchar(1000) default NULL,
  PRIMARY KEY  (`ID`),
  KEY `FK_BONUS_REPORT_bonus_id` (`BR_ID`),
  KEY `FK_BONUS_REPORT_USER_ID` (`USER_ID`),
  CONSTRAINT `FK_BONUS_REPORT_bonus_id` FOREIGN KEY (`BR_ID`) REFERENCES `BONUS_RECONCILIATION` (`ID`) ON DELETE CASCADE,
  CONSTRAINT `FK_BONUS_REPORT_USER_ID` FOREIGN KEY (`USER_ID`) REFERENCES `USERS` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB  DEFAULT CHARSET=latin1;



DROP TABLE IF EXISTS `BONUS_REC_REPORT_HISTORY`;
CREATE TABLE  `BONUS_REC_REPORT_HISTORY` (
  `ID` int(10) unsigned NOT NULL auto_increment,
  `REP_ID` int(10) unsigned NOT NULL,
  `QUATERELY_BONUS` varchar(45) NOT NULL,
  `COMPANY_BONUS` varchar(45) NOT NULL,
  `CURRENCY_TYPE` tinyint(3) unsigned NOT NULL,
  `MODIFIED_BY` varchar(45) default NULL,
  `MODIFIED_ON` datetime default NULL,
  `COMMENTS` varchar(1500) default NULL,
  `TYPE` tinyint(1) unsigned NOT NULL ,
  `QUA_AMOUNT` varchar(45) NOT NULL,
  `QUA_AMOUNT_INR` varchar(45) DEFAULT NULL,
  `COM_AMOUNT` varchar(45) NOT NULL,
  `COM_AMOUNT_INR` varchar(45) DEFAULT NULL,
  `TOTAL` varchar(45) default NULL,
  `CURRENCY_NAME` varchar(25) default NULL,
  PRIMARY KEY(`ID`),
  KEY `FK_BONUS_REC_REPORT_HISTORY_1` (`REP_ID`),
  CONSTRAINT `FK_BONUS_REC_REPORT_HISTORY_1` FOREIGN KEY (`REP_ID`) REFERENCES `BONUS_REC_REPORT` (`ID`) ON DELETE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=latin1;


DROP TABLE IF EXISTS `FIXED_BONUS`;
CREATE TABLE  `FIXED_BONUS` (
  `ID` INT(11) NOT NULL,
 `QUATERELY_BONUS` varchar(45) DEFAULT NULL,
  `COMPANY_BONUS` varchar(45) DEFAULT NULL,
  `MONTH` varchar(25) NOT NULL,
  `CURRENCY_TYPE` tinyint(3) unsigned NOT NULL,
  `MODIFIED_ON` date DEFAULT NULL,
  `MODIFIED_BY` INT(11) DEFAULT NULL,
  PRIMARY KEY  (`ID`)
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;


DROP TABLE IF EXISTS `BONUS_REC_HOLD`;
CREATE TABLE  `BONUS_REC_HOLD` (
  `ID` INT(10) UNSIGNED NOT NULL AUTO_INCREMENT,
  `REP_ID` INT(10) UNSIGNED NOT NULL,
  `USER_ID` INT(11) NOT NULL,
  `STATUS` INT(11) NOT NULL,
  `COMMENTS` VARCHAR(500) NOT NULL,
  `ACTION_ON` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `ESCALATED_FROM` INT(10) UNSIGNED NOT NULL,
  PRIMARY KEY (`ID`),
  KEY `FK_BONUS_REC_HOLD_1` (`REP_ID`,`USER_ID`,`ESCALATED_FROM`),
  CONSTRAINT `FK_BONUS_REC_HOLD_1` FOREIGN KEY (`REP_ID`) REFERENCES `BONUS_REC_REPORT` (`ID`) ON DELETE CASCADE
) ENGINE=INNODB DEFAULT CHARSET=LATIN1;



DROP TABLE IF EXISTS `BONUS_REC_EXCHANGE_RATE`;
CREATE TABLE  `BONUS_REC_EXCHANGE_RATE` (
  `ID` int(10) unsigned NOT NULL auto_increment,
  `REP_ID` int(10) unsigned NOT NULL,
  `CURRENCY_TYPE` tinyint(3) unsigned NOT NULL,
  `QUA_AMOUNT` double NOT NULL,
  `COM_AMOUNT` double NOT NULL,
  PRIMARY KEY  (`ID`),
  KEY `index_2` (`REP_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

##################################################################################################

ALTER TABLE `DIKSHA_PORTAL_2`.`PROJECT_MAP` ADD COLUMN `CALENDAR_ID` INT(11);

###############Added new column MODIFIED_BY for all Employee related tables #######################
ALTER table `DIKSHA_PORTAL_2`.`PROFILE_INFO` add column MODIFIED_BY int(10) default NULL;
ALTER table `DIKSHA_PORTAL_2`.`PERSONAL_INFO` add column MODIFIED_BY int(10) default NULL;
ALTER table `DIKSHA_PORTAL_2`.`NOMINEE_INFO` add column MODIFIED_BY int(10) default NULL;
ALTER table `DIKSHA_PORTAL_2`.`FINANCE_INFO` add column MODIFIED_BY int(10) default NULL;
ALTER table `DIKSHA_PORTAL_2`.`PASSPORT_INFO` add column MODIFIED_BY int(10) default NULL;
ALTER table `DIKSHA_PORTAL_2`.`EXPERIENCE_INFO` add column MODIFIED_BY int(10) default NULL;
ALTER table `DIKSHA_PORTAL_2`.`EDUCATION_INFO` add column MODIFIED_BY int(10) default NULL;

####################################################################################################
INSERT INTO `DIKSHA_PORTAL_2`.`SALARY_CONFIG` (`ID`, `HEAD`, `COMPONENT`, `VALUE`, `VALUE_TYPE`, `AUTO_CALC`, `FORMULA`, `HEAD_ORDER`, `COMPONENT_ORDER`) VALUES (17, 'D - VARIABLES ', 'Retention Bonus', 0.000000000000000, 'RBONUS', 0, 0.00000, 4, 5);
ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_INFO` ADD COLUMN USER_ID INT(10) AFTER BASIC;

############################# Added new column RETENTION_BONUS_INSTALL,PERDIEM_OFFER_STRING -By Manoj  ###################3
ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_INFO` ADD COLUMN `RETENTION_BONUS_INSTALL` VARCHAR(30) AFTER `PER_ACCIDENT_POLICY`;
ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_INFO` ADD COLUMN `PERDIEM_OFFER_STRING` VARCHAR(45) AFTER `RETENTION_BONUS_INSTALL`;

ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_INFO_FOR_APPROVAL` ADD COLUMN `RETENTION_BONUS_INSTALL` VARCHAR(30) AFTER `PER_ACCIDENT_POLICY`;
ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_INFO_FOR_APPROVAL` ADD COLUMN `PERDIEM_OFFER_STRING` VARCHAR(45) AFTER `RETENTION_BONUS_INSTALL`;

ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_IN_ADVANCE` ADD COLUMN `NUMBER_OF_MONTHS` VARCHAR(45) NOT NULL AFTER `CREATED_ON`;
ALTER TABLE `DIKSHA_PORTAL_2`.`PERDIEM_IN_ADVANCE` ADD COLUMN `NUMBER_OF_MONTHS` VARCHAR(45) AFTER `CREATED_ON`, ADD COLUMN `TERMS` VARCHAR(10) AFTER `NUMBER_OF_MONTHS`;

###############################  ####################################################################
ALTER TABLE `DIKSHA_PORTAL_2`.`PERDIEM_IN_ADVANCE` CHANGE COLUMN `MONTHLY` `TERM_DEDUCTIONS` VARCHAR(45) CHARACTER SET latin1 COLLATE latin1_swedish_ci DEFAULT NULL;
ALTER TABLE `DIKSHA_PORTAL_2`.`CANDIDATE_PERDIEM_DETAILS` ADD COLUMN `USER_ID` VARCHAR(45) AFTER `PERDIEM`;

############################### Added to track the balance amount and paid amount in salary advance -By Manoj  #############
ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_IN_ADVANCE` ADD COLUMN `BALANCE_AMOUNT` VARCHAR(45)  AFTER `NUMBER_OF_MONTHS`;
ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_IN_ADVANCE` ADD COLUMN `PAID_AMOUNT` VARCHAR(45)  AFTER `BALANCE_AMOUNT`;

############################### Added to track the balance amount and paid amount in Perdiem advance -By Manoj  #############
ALTER TABLE `DIKSHA_PORTAL_2`.`PERDIEM_IN_ADVANCE` ADD COLUMN `BALANCE_AMOUNT` VARCHAR(45) AFTER `TERMS`,ADD COLUMN `PAID_AMOUNT` VARCHAR(45) AFTER `BALANCE_AMOUNT`;

############################### Created the new table for saving new Job Requirements -By Manoj(12-09-2014)  #############
DROP TABLE IF EXISTS `DIKSHA_PORTAL_2`.`JOB_REQUIREMENT`;
CREATE TABLE `DIKSHA_PORTAL_2`.`JOB_REQUIREMENT` (
 `ID` int(11) NOT NULL auto_increment, 
 `JOB_TITLE` varchar(100) default NULL, 
 `JOB_DESCRIPTION` varchar(2000) default NULL, 
 `POSTED_BY` int(11) default NULL, 
 `POSTED_ON` date default NULL, 
 `IS_ACTIVE` int(11) default NULL, 
 `REQ_TAG_ID` varchar(45) default NULL, 
 `EXPERIENCE` varchar(45) default NULL, 
 `LOCATION` varchar(45) default NULL, 
 `POSITION` varchar(45) default NULL, 
 `SKILLS` varchar(200) default NULL, 
 PRIMARY KEY  (`ID`)) ENGINE=MyISAM AUTO_INCREMENT=7 DEFAULT CHARSET=latin1;

############################### Added to track the Job req id -By Manoj(12-09-2014)( ################################################
ALTER TABLE `DIKSHA_PORTAL_2`.`REFER_FRIEND` ADD COLUMN `JOB_REQ_ID` INT NOT NULL  AFTER `IS_DELETED` ;

############################### Added to get all currency type in reimbursement -By Manoj(19-09-2014)( ################################################
INSERT INTO `DIKSHA_PORTAL_2`.`CURRENCY_TYPE` (`ID`, `TYPE`) VALUES (4, 'CAD');
INSERT INTO `DIKSHA_PORTAL_2`.`CURRENCY_TYPE` (`ID`, `TYPE`) VALUES (5, 'GBP');
INSERT INTO `DIKSHA_PORTAL_2`.`CURRENCY_TYPE` (`ID`, `TYPE`) VALUES (6, 'EUR');
INSERT INTO `DIKSHA_PORTAL_2`.`CURRENCY_TYPE` (`ID`, `TYPE`) VALUES (7, 'CNY');
INSERT INTO `DIKSHA_PORTAL_2`.`CURRENCY_TYPE` (`ID`, `TYPE`) VALUES (8, 'JPY');
INSERT INTO `DIKSHA_PORTAL_2`.`CURRENCY_TYPE` (`ID`, `TYPE`) VALUES (9, 'AED');
INSERT INTO `DIKSHA_PORTAL_2`.`CURRENCY_TYPE` (`ID`, `TYPE`) VALUES (10, 'SGD');
INSERT INTO `DIKSHA_PORTAL_2`.`CURRENCY_TYPE` (`ID`, `TYPE`) VALUES (11, 'MYR');
INSERT INTO `DIKSHA_PORTAL_2`.`CURRENCY_TYPE` (`ID`, `TYPE`) VALUES (12, 'KRW');

############################### Added to Store the android device RegId  -By Manoj(16-10-2014)( ################################################

CREATE  TABLE `DIKSHA_PORTAL_2`.`GCM_REGISTRATION` (
  `ID` INT NOT NULL AUTO_INCREMENT ,
  `USER_ID` INT NOT NULL ,
  `REG_ID` VARCHAR(1000) NOT NULL ,
  PRIMARY KEY (`ID`) );
  
  CREATE  TABLE `DIKSHA_PORTAL_2`.`GCM_BROADCAST_MESSAGE` (
  `ID` INT NOT NULL AUTO_INCREMENT ,
  `MESSAGE` VARCHAR(45) NULL ,
  `TIME` DATETIME NULL ,
  PRIMARY KEY (`ID`) );
  
  ############################################Added new Columns for RELOCATION_PLACE##################################################  

ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_INFO` ADD COLUMN `RELOCATION_PLACE` VARCHAR(45) NULL  AFTER `PERDIEM_OFFER_STRING` ;
ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_INFO_FOR_APPROVAL` ADD COLUMN `RELOCATION_PLACE` VARCHAR(45) NULL  AFTER `PERDIEM_OFFER_STRING` ;
  
  
 
 ################################ Added new Tables for RESOURCE REQUIREMENT MODULE -By Manoj(17-03-2015) ################################################
  
INSERT INTO `DIKSHA_PORTAL_2`.`MODULES` (`ID`, `NAME`, `PARENT_ID`, `IS_PROC_CHAIN`, `PERMISSION_TYPES`) VALUES (79, 'RESOURCE REQUIREMENT', 14, 0, 'S-V-E');
INSERT INTO `DIKSHA_PORTAL_2`.`MODULES` (`ID`, `NAME`, `PARENT_ID`, `IS_PROC_CHAIN`, `PERMISSION_TYPES`) VALUES (80, 'PROPOSED RESOURCES', 14, 0, 'S-V-E');
INSERT INTO `DIKSHA_PORTAL_2`.`REQUEST_TYPE` (`ID`, `NAME`, `ABBREVATION`, `FEATURE_ID`) VALUES (20, 'RESOURCE REQUIREMENT', 'RR', 79);

CREATE TABLE `DIKSHA_PORTAL_2`.`RESOURCE_REQUIREMENT` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `ESR_MAP_ID` int(11) DEFAULT NULL,
  `REQ_TITLE` varchar(100) DEFAULT NULL,
  `REQ_DETAILS` varchar(500) DEFAULT NULL,
  `NO_OF_POSITIONS` int(11) DEFAULT NULL,
  `PROFITABILITY` varchar(45) DEFAULT NULL,
  `CLOSURE` varchar(45) DEFAULT NULL,
  `CLIENT_NAME` varchar(80) DEFAULT NULL,
  `CREATE_DATE` timestamp NULL DEFAULT NULL,
  `MAIN_STATUS_ID` int(11) DEFAULT NULL,
  `REQUIREMENT_DATE` timestamp NULL DEFAULT '0000-00-00 00:00:00',
  `MANDATORY_SKILLS` varchar(500) DEFAULT NULL,
  `ADDITIONAL_SKILLS` varchar(500) DEFAULT NULL,
  `YEARS_OF_EXPERIENCE` varchar(100) DEFAULT NULL,
  `RELEVANT_EXPERIENCE` varchar(100) DEFAULT NULL,
  `LOCATION` varchar(100) DEFAULT NULL,
  `POSITION_NAME` varchar(100) DEFAULT NULL,
  `REQUIRED_FOR` varchar(100) DEFAULT NULL,
  `INTERVIEWER` varchar(200) DEFAULT NULL,
  `COMMENTS` varchar(500) DEFAULT NULL,
  `PROJECTNAME` varchar(200) DEFAULT NULL,
  `EMPLOYMENT_TYPE_ID` int(11) DEFAULT NULL,
  `ASSIGN_TO` int(11) DEFAULT NULL,
  `CLOSURE_ID` int(11) DEFAULT NULL,
  `PROFITABILITY_ID` int(11) DEFAULT NULL,
  `REQUIRED_FOR_ID` int(11) DEFAULT NULL,
  PRIMARY KEY (`ID`));

CREATE TABLE `DIKSHA_PORTAL_2`.`RESOURCES` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `RESOURCE_NAME` varchar(100) DEFAULT NULL,
  `EMAIL_ID` varchar(45) DEFAULT NULL,
  `CONTACT_NO` varchar(45) DEFAULT NULL,
  `LAST_MODIFIED_BY` int(11) DEFAULT NULL,
  `TOTAL_EXP` int(11) DEFAULT NULL,
  `RELEVANT_EXP` int(11) DEFAULT NULL,
  `CURRENT_COMP_EXP` int(11) DEFAULT NULL,
  `CURRENT_EMPLOYER` varchar(45) DEFAULT NULL,
  `CURRENT_ROLE` varchar(45) DEFAULT NULL,
  `SKILL_SET` varchar(500) DEFAULT NULL,
  `LEAVING_REASON` varchar(200) DEFAULT NULL,
  `CTC` varchar(45) DEFAULT NULL,
  `ECTC` varchar(45) DEFAULT NULL,
  `NOTICE_PERIOD` varchar(45) DEFAULT NULL,
  `OFFER_IN_HAND` varchar(100) DEFAULT NULL,
  `OFFER_FOR_EARLY_JOINING` varchar(200) DEFAULT NULL,
  `CONDITION_FOR_EARLY_JOINING` varchar(200) DEFAULT NULL,
  `CURRENT_LOCATION` varchar(45) DEFAULT NULL,
  `LOCATION_CONSTRAINT` varchar(45) DEFAULT NULL,
  `COMMENTS` varchar(200) DEFAULT NULL,
  `IS_SELECTED` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`ID`));

CREATE  TABLE `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (
  `ID` INT NOT NULL AUTO_INCREMENT ,
  `NAME` VARCHAR(100) NULL ,
  PRIMARY KEY (`ID`) );
  

INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (1, 'Profile shared');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (2, 'Technical Interview on process');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (3, 'Client Interview on process');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (4, 'Cleared Technical round');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (5, 'Shortlisted to hire');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (6, 'Hiring on process');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (7, 'Salary negotiation');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (8, 'Awaiting document');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (9, 'Awaiting feedback');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (10, 'Awaiting RM approval');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (11, 'Awaiting DOJ confirmation');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (12, 'Awaiting acceptance');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (13, 'No response');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (14, 'Not responding');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (15, 'Not Interested');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (16, 'Finalising');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (17, 'Rejected');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (18, 'Blacklisted');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_STATUS` (`ID`, `NAME`) VALUES (19, 'Closed');


CREATE TABLE `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `STATUS` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;


INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (1, 'Open');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (3, 'Internal Interview on process');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (3, 'Client Interview on process');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (4, 'Shortlisted');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (5, 'Candidate confirmed');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (6, 'Hiring on process');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (7, 'Profiles rejected');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (8, 'Candidate rejected');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (9, 'Failed');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (10, 'Awaiting profiles');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (11, 'Awaiting client feedback');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (12, 'Awaiting candidate confirmation');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (13, 'Awaiting candidate to join');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (14, 'Awaiting interview schedule');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (15, 'Candidate backout');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (16, 'Requirement on Hold');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (17, 'Candidate on hold');
INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_MAIN_STATUS` (`ID`, `STATUS`) VALUES (18, 'Closed');


############################################New Tables RESOURCE_REQ_MAIN_STATUS, RESOURCE_REQ_EMPLOYMENT_TYPE for Resource requirement module ##################################################  
 

CREATE TABLE `DIKSHA_PORTAL_2`.`RESOURCE_REQ_EMPLOYMENT_TYPE` (
  `ID` int(11) NOT NULL AUTO_INCREMENT,
  `EMPLOYMENT_TYPE` varchar(200) DEFAULT NULL,
  PRIMARY KEY (`ID`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

INSERT INTO `DIKSHA_PORTAL_2`.`RESOURCE_REQ_EMPLOYMENT_TYPE` VALUES (1,'Permanent'),(2,'Temporary'),(3,'Contract'),(4,'C2H');


 CREATE  TABLE `DIKSHA_PORTAL_2`.`RESOURCES_MAPPING_HISTORY` (
  `ID` INT NOT NULL ,
  `RES_MAP_ID` INT NULL ,
  `RESOURCE_NAME` VARCHAR(45) NULL ,
  `TOTAL_EXP` INT NULL ,
  `RELEVANT_EXP` INT NULL ,
  `CURRENT_EMPLOYER` VARCHAR(45) NULL ,
  `CURRENT_ROLE` VARCHAR(45) NULL ,
  `CTC` VARCHAR(45) NULL ,
  `ECTC` VARCHAR(45) NULL ,
  `NOTICE_PERIOD` VARCHAR(45) NULL ,
  `COMMENTS` VARCHAR(45) NULL ,
  `MODIFIED_BY` INT NULL ,
  `MODIFIED_ON` DATE NULL ,
  PRIMARY KEY (`ID`) );
  
CREATE  TABLE `DIKSHA_PORTAL_2`.`REQ_RESOURCE_MAP` (
  `ID` INT NOT NULL AUTO_INCREMENT ,
  `REQ_ID` INT NULL ,
  `RESOURCE_ID` INT NULL ,
  `STATUS_ID` INT NULL ,
  `CLOSED` INT NULL ,
  PRIMARY KEY (`ID`) );  
  
  
  
  //--------------------------------------> added new table for Retention Bonus(1/08/2015) <---------------------------------//
  
  CREATE  TABLE `DIKSHA_PORTAL_2`.`RETENTION_BONUS` (
  `ID` INT NOT NULL ,
  `USER_ID` INT NOT NULL ,
  `AMOUNT` VARCHAR(45) NULL ,
  `FROM_DATE` DATETIME NULL ,
  `RETENTION_INSTALLMENTS` INT NULL DEFAULT NULL,
  `LAST_MODIFIED_DATE` DATETIME NULL ,
  PRIMARY KEY (`ID`) );
  
  INSERT INTO `DIKSHA_PORTAL_2`.`SALARY_CONFIG` (`ID`, `HEAD`, `COMPONENT`, `VALUE`, `VALUE_TYPE`, `AUTO_CALC`, `FORMULA`, `HEAD_ORDER`, `COMPONENT_ORDER`) VALUES (16, 'D - VARIABLES', 'Fixed Perdiem', 0.000000000000000, 'FIXED', 0, 0.00000, 4, 4);


ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_INFO` ADD COLUMN `PERDIEM_TYPE` VARCHAR(45) NULL  AFTER `RELOCATION_PLACE` ;
ALTER TABLE `DIKSHA_PORTAL_2`.`SALARY_INFO_FOR_APPROVAL` ADD COLUMN `PERDIEM_TYPE` INT NULL  AFTER `RELOCATION_PLACE` , CHANGE COLUMN `RELOCATION_PLACE` `RELOCATION_PLACE` VARCHAR(45) NULL  ;

  
  
 
  




  
 
